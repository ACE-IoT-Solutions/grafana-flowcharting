{"version":3,"sources":["../src/flowchartHandler.js"],"names":["FlowchartHandler","$scope","elem","ctrl","data","u","log","$elem","find","flowcharts","changeSourceFlag","changeOptionFlag","changeDataFlag","changedRuleFlag","defaultXml","xgraph","undefined","$container","onMapping","active","object","id","length","import","events","on","render","obj","i","forEach","map","container","createContainer","fc","Flowchart","name","xml","push","index","Array","isArray","$","uniqueID","html","flowchart","draw","changeRuleFlag","setOptions","setStates","applyStates","width","height","refresh","rules","rulesHandler","getRules","series","setScale","scale","setCenter","center","setGrid","grid","setTooltip","tooltip","setLock","lock","setZoom","zoom","redraw","objToMap","getFlowchart","getId","setMap","unsetMap","urlEditor","editorWindow","window","open","addEventListener","event","origin","source","postMessage","sourceChanged","$apply","close"],"mappings":"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","sourcesContent":["/* eslint-disable prefer-destructuring */\r\nimport Flowchart from './flowchart_class';\r\n\r\nexport default class FlowchartHandler {\r\n  /** @ngInject */\r\n  constructor($scope, elem, ctrl, data) {\r\n    u.log(1, 'FlowchartHandler.constructor()');\r\n    u.log(0, 'FlowchartHandler.constructor() data', data);\r\n    this.$scope = $scope || null;\r\n    this.$elem = elem.find('.flowchart-panel__chart');\r\n    this.ctrl = ctrl;\r\n    this.flowcharts = [];\r\n    this.data = data;\r\n    this.changeSourceFlag = true;\r\n    this.changeOptionFlag = true;\r\n    this.changeDataFlag = true;\r\n    this.changedRuleFlag = true;\r\n    this.defaultXml =\r\n      '<mxGraphModel dx=\"1073\" dy=\"521\" grid=\"1\" gridSize=\"10\" guides=\"1\" tooltips=\"1\" connect=\"1\" arrows=\"1\" fold=\"1\" page=\"0\" pageScale=\"1\" pageWidth=\"827\" pageHeight=\"1169\" math=\"0\" shadow=\"0\"><root><mxCell id=\"0\"/><mxCell id=\"1\" parent=\"0\"/><mxCell id=\"arrow-1\" style=\"edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;jettySize=auto;orthogonalLoop=1;strokeWidth=4;shadow=1;\" parent=\"1\" source=\"shape-grafana\" target=\"shape-love\" edge=\"1\"><mxGeometry relative=\"1\" as=\"geometry\"/></mxCell><object label=\"Grafana\" href=\"www.google.fr\" id=\"shape-grafana\"><mxCell style=\"rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;shadow=1;\" parent=\"1\" vertex=\"1\"><mxGeometry x=\"10\" y=\"10\" width=\"120\" height=\"60\" as=\"geometry\"/></mxCell></object><mxCell id=\"arrow-2\" style=\"edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;jettySize=auto;orthogonalLoop=1;strokeWidth=4;shadow=1;\" parent=\"1\" source=\"shape-love\" target=\"shape-mxgraph\" edge=\"1\"><mxGeometry relative=\"1\" as=\"geometry\"/></mxCell><mxCell id=\"shape-love\" value=\"loves\" style=\"triangle;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;shadow=1;\" parent=\"1\" vertex=\"1\"><mxGeometry x=\"210\" width=\"60\" height=\"80\" as=\"geometry\"/></mxCell><mxCell id=\"shape-mxgraph\" value=\"mxGraph\" style=\"ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;shadow=1;\" parent=\"1\" vertex=\"1\"><mxGeometry x=\"340\" width=\"120\" height=\"80\" as=\"geometry\"/></mxCell><mxCell id=\"text-grafana\" value=\"MyText : TextVal\" style=\"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;\" parent=\"1\" vertex=\"1\"><mxGeometry x=\"9\" y=\"50\" width=\"120\" height=\"20\" as=\"geometry\"/></mxCell><mxCell id=\"text-arrow1\" value=\"Text 2\" style=\"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;\" parent=\"1\" vertex=\"1\"><mxGeometry x=\"150\" y=\"20\" width=\"40\" height=\"20\" as=\"geometry\"/></mxCell><mxCell id=\"text-arrow2\" value=\"Text 3\" style=\"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;\" parent=\"1\" vertex=\"1\"><mxGeometry x=\"280\" y=\"20\" width=\"40\" height=\"20\" as=\"geometry\"/></mxCell><mxCell id=\"text-mxgraph\" value=\"Text 4\" style=\"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;\" parent=\"1\" vertex=\"1\"><mxGeometry x=\"380\" y=\"50\" width=\"40\" height=\"20\" as=\"geometry\"/></mxCell></root></mxGraphModel>';\r\n    this.xgraph = undefined;\r\n    this.$container = undefined;\r\n\r\n    this.onMapping = {\r\n      active: false, // boolean if pointer mapping is active\r\n      object: undefined, // ojb to return id of mapping\r\n      id: undefined // id of dom\r\n    };\r\n\r\n    if (this.data !== undefined && this.data != null && this.data.length > 0) {\r\n      this.import(this.data);\r\n    }\r\n\r\n    // Events Render\r\n    ctrl.events.on('render', () => {\r\n      this.render();\r\n    });\r\n  }\r\n\r\n  import(obj) {\r\n    u.log(1, 'FlowchartHandler.import()');\r\n    u.log(0, 'FlowchartHandler.import() obj', obj);\r\n    let i = 0;\r\n    obj.forEach(map => {\r\n      const container = this.createContainer();\r\n      const fc = new Flowchart(map.name, map.xml, container, map);\r\n      this.flowcharts.push(fc);\r\n      this.data[i] = map;\r\n      i += 1;\r\n    });\r\n  }\r\n\r\n  getFlowchart(index) {\r\n    return this.flowcharts[index];\r\n  }\r\n\r\n  getFlowcharts() {\r\n    return this.flowcharts;\r\n  }\r\n\r\n  countFlowcharts() {\r\n    if (this.flowcharts !== undefined && Array.isArray(this.flowcharts))\r\n      return this.flowcharts.length;\r\n    return 0;\r\n  }\r\n\r\n  createContainer() {\r\n    const $container = $(\r\n      `<div id=\"flowchart_${\r\n        u.uniqueID\r\n      }\" style=\"margin:auto;position:relative,width:100%;height:100%\"></div>`\r\n    );\r\n    this.$elem.html($container);\r\n    return $container[0];\r\n  }\r\n\r\n  addFlowchart(name) {\r\n    u.log(1, 'FlowchartHandler.addFlowchart()');\r\n    const container = this.createContainer();\r\n    const data = {};\r\n    const flowchart = new Flowchart(name, this.defaultXml, container, data);\r\n    this.data.push(data);\r\n    this.flowcharts.push(flowchart);\r\n  }\r\n\r\n  render() {\r\n    u.log(1, 'flowchartHandler.render()');\r\n    if (this.changeSourceFlag) {\r\n      this.draw();\r\n      this.changeSourceFlag = false;\r\n      this.changeRuleFlag = true;\r\n    }\r\n    if (this.changeOptionFlag) {\r\n      this.setOptions();\r\n      this.changeOptionFlag = false;\r\n    }\r\n    if (this.changeRuleFlag || this.changeDataFlag) {\r\n      this.setStates();\r\n      this.applyStates();\r\n      this.changeRuleFlag = false;\r\n      this.changeDataFlag = false;\r\n    }\r\n    const width = this.$elem.width();\r\n    const height = this.ctrl.height;\r\n    this.refresh(width, height);\r\n  }\r\n\r\n  sourceChanged() {\r\n    this.changeSourceFlag = true;\r\n  }\r\n\r\n  optionChanged() {\r\n    this.changeOptionFlag = true;\r\n  }\r\n\r\n  ruleChanged() {\r\n    this.changeRuleFlag = true;\r\n  }\r\n\r\n  dataChanged() {\r\n    this.changeDataFlag = true;\r\n  }\r\n\r\n  refresh(width, height) {\r\n    u.log(1, `FlowchartHandler.refresh()`);\r\n    this.flowcharts.forEach(flowchart => {\r\n      flowchart.refresh(width, height);\r\n    });\r\n  }\r\n\r\n  setStates() {\r\n    const rules = this.ctrl.rulesHandler.getRules();\r\n    const series = this.ctrl.series;\r\n    this.flowcharts.forEach(flowchart => {\r\n      flowchart.setStates(rules, series);\r\n    });\r\n  }\r\n\r\n  applyStates() {\r\n    this.flowcharts.forEach(flowchart => {\r\n      flowchart.applyStates();\r\n    });\r\n  }\r\n\r\n  setOptions() {\r\n    this.flowcharts.forEach(flowchart => {\r\n      flowchart.setScale(flowchart.data.scale);\r\n      flowchart.setCenter(flowchart.data.center);\r\n      flowchart.setGrid(flowchart.data.grid);\r\n      flowchart.setTooltip(flowchart.data.tooltip);\r\n      flowchart.setLock(flowchart.data.lock);\r\n      flowchart.setZoom(flowchart.data.zoom);\r\n    });\r\n  }\r\n\r\n  draw() {\r\n    u.log(1, `FlowchartHandler.draw()`);\r\n    this.flowcharts.forEach(flowchart => {\r\n      flowchart.redraw();\r\n    });\r\n  }\r\n\r\n  setMap(objToMap) {\r\n    const flowchart = this.getFlowchart(0);\r\n    this.onMapping.active = true;\r\n    this.onMapping.object = objToMap;\r\n    this.onMapping.id = objToMap.getId();\r\n    this.onMapping.$scope = this.$scope;\r\n    flowchart.setMap(this.onMapping);\r\n  }\r\n\r\n  unsetMap() {\r\n    const flowchart = this.getFlowchart(0);\r\n    this.onMapping.active = false;\r\n    this.onMapping.object = undefined;\r\n    this.onMapping.id = '';\r\n    flowchart.unsetMap();\r\n  }\r\n\r\n  isMapping(objToMap) {\r\n    if (objToMap === undefined || objToMap == null) return this.onMapping.active;\r\n    if (this.onMapping.active === true && objToMap === this.onMapping.object) return true;\r\n    return false;\r\n  }\r\n\r\n  openDrawEditor(index) {\r\n    const urlEditor = 'https://draw.io?embed=1';\r\n    const editorWindow = window.open(urlEditor, 'MxGraph Editor', 'width=1280, height=720');\r\n    window.addEventListener('message', event => {\r\n      if (event.origin !== 'https://www.draw.io') return;\r\n      // when editor is open\r\n      if (event.data === 'ready') {\r\n        // send xml\r\n        event.source.postMessage(this.flowcharts[index].data.xml, event.origin);\r\n      } else {\r\n        if (event.data !== undefined && event.data.length > 0) {\r\n          // this.flowcharts[index].setXml(event.data);\r\n          this.flowcharts[index].redraw(event.data);\r\n          this.sourceChanged();\r\n          this.$scope.$apply();\r\n          // this.render();\r\n        }\r\n        if (event.data !== undefined || event.data.length === 0) {\r\n          editorWindow.close();\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n"],"file":"flowchartHandler.js"}