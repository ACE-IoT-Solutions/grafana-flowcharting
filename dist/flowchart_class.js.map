{"version":3,"sources":["../src/flowchart_class.js"],"names":["Flowchart","name","xmlGraph","container","data","u","log","xml","xgraph","undefined","stateHandler","import","init","obj","source","type","value","url","options","zoom","center","scale","lock","grid","bgColor","XGraph","drawGraph","scaleGraph","centerGraph","lockGraph","StateHandler","rules","series","setStates","applyStates","width","height","setWidth","setHeight","refreshGraph","unzoomGraph","zoomGraph","reflesh","minify","prettify"],"mappings":"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","sourcesContent":["import XGraph from './graph_class';\nimport StateHandler from './statesHandler';\n\nexport default class Flowchart {\n  /** @ngInject */\n  constructor(name, xmlGraph, container, data) {\n    u.log(1, `flowchart[${name}].constructor()`);\n    this.data = data;\n    this.data.name = name;\n    this.data.xml = xmlGraph;\n    this.container = container;\n    this.xgraph = undefined;\n    this.stateHandler = undefined;\n    this.import(data);\n    this.init();\n  }\n\n  import(obj) {\n    u.log(1, `flowchart[${this.data.name}].import()`);\n    u.log(0, `flowchart[${this.data.name}].import() obj`, obj);\n    if (obj.source) this.data.type = obj.source.type;\n    else this.data.type = obj.type || this.data.type || 'xml';\n    if (obj.source) this.data.xml = obj.source.xml.value;\n    else this.data.xml = obj.xml || this.data.xml || '';\n    if (obj.source) this.data.url = obj.source.url.value;\n    else this.data.url = 'http://<source>:<port>/<pathToXml>';\n    if (obj.options) this.data.zoom = obj.options.zoom;\n    else this.data.zoom = obj.zoom || '100%';\n    if (obj.options) this.data.center = obj.options.center;\n    else this.data.center = obj.center || true;\n    if (obj.options) this.data.scale = obj.options.scale;\n    else this.data.scale = obj.scale || true;\n    if (obj.options) this.data.lock = obj.options.lock;\n    else this.data.lock = obj.lock || true;\n    if (obj.options) this.data.grid = obj.options.grid;\n    else this.data.grid = obj.grid || false;\n    if (obj.options) this.data.bgColor = obj.options.bgColor;\n    else this.data.bgColor = obj.bgColor || undefined;\n  }\n\n  getData() {\n    return this.data;\n  }\n\n  init() {\n    u.log(1, `flowchart[${this.data.name}].init()`);\n    this.xgraph = new XGraph(this.container, this.data.xml);\n    if (this.data.xml !== undefined && this.data.xml !== null) {\n      this.xgraph.drawGraph();\n      if (this.data.scale) this.xgraph.scaleGraph(true);\n      if (this.data.center) this.xgraph.centerGraph(true);\n      if (this.data.lock) this.xgraph.lockGraph(true);\n      this.stateHandler = new StateHandler(this.xgraph);\n    } else {\n      u.log(3, 'XML Graph not defined');\n    }\n  }\n\n  setStates(rules, series) {\n    u.log(1, `flowchart[${this.data.name}].setStates()`);\n    u.log(0, `flowchart[${this.data.name}].setStates() rules`, rules);\n    u.log(0, `flowchart[${this.data.name}].setStates() series`, series);\n    if (rules === undefined) u.log(3, \"Rules shoudn't be null\");\n    if (series === undefined) u.log(3, \"Series shoudn't be null\");\n    this.stateHandler.setStates(rules, series);\n  }\n\n  applyStates() {\n    u.log(1, `flowchart[${this.data.name}].applyStates()`);\n    this.stateHandler.applyStates();\n  }\n\n  refresh(width, height) {\n    u.log(1, `flowchart[${this.data.name}].refresh()`);\n    if (width !== undefined && width != null) this.setWidth(width);\n    if (height !== undefined && height != null) this.setHeight(height);\n    this.xgraph.refreshGraph(this.width, this.height);\n    if (this.data.scale) {\n      this.xgraph.unzoomGraph();\n      this.xgraph.scaleGraph(this.data.scale);\n    } else {\n      this.xgraph.zoomGraph(this.data.zoom);\n      this.xgraph.lockGraph(this.data.lock);\n      this.xgraph.centerGraph(this.data.center);\n    }\n  }\n\n  redraw(xmlGraph) {\n    u.log(1, `flowchart[${this.data.name}].redraw()`);\n    if (xmlGraph !== undefined) this.data.xml = xmlGraph;\n    this.init();\n    this.reflesh();\n  }\n\n  setWidth(width) {\n    this.width = width;\n  }\n\n  setHeight(height) {\n    this.height = height;\n  }\n\n  setXml(xml) {\n    this.data.xml = xml;\n  }\n\n  minify() {\n    this.data.xml = u.minify(this.data.xml);\n  }\n\n  prettify() {\n    this.data.xml = u.prettify(this.data.xml);\n  }\n\n  getContainer() {\n    return this.container;\n  }\n}\n"],"file":"flowchart_class.js"}