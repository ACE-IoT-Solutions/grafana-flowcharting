{"version":3,"sources":["../src/flowchartControl.js"],"names":["MetricsPanelCtrl","TimeSeries","kbn","flowchartEditor","displayEditor","shapeEditor","valueEditor","_","panelDefaults","content","shapes","values","graph","legend","show","min","max","avg","current","total","gradient","enabled","links","datasource","maxDataPoints","interval","targets","cacheTimeout","nullPointMode","legendType","breakPoint","aliasColors","format","valueName","strokeWidth","fontSize","combine","threshold","label","FlowchartCtrl","$scope","$injector","$sce","$http","defaults","panel","graphId","id","containerDivId","events","on","onRender","bind","onDataReceived","onDataError","onInitEditMode","$","document","getElementById","addEditorTab","templateUrl"],"mappings":"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","file":"flowchartControl.js","sourcesContent":["import {MetricsPanelCtrl} from 'app/plugins/sdk';\nimport TimeSeries from 'app/core/time_series2';\nimport kbn from 'app/core/utils/kbn';\n\n// mxGraph libs\n// var mxBasePath = './libs/mxgraph/src';\n// import mxClient from './libs/mxgraph/src/js/mxClient';\n\nimport {\n  flowchartEditor,\n  displayEditor,\n  shapeEditor,\n  valueEditor\n} from './properties';\n\nimport _ from 'lodash';\nimport './series_overrides_flowchart_ctrl';\n\nconst panelDefaults = {\n  content : '<mxGraphModel dx=\"2066\" dy=\"1171\" grid=\"1\" gridSize=\"10\" guides=\"1\" tooltips=\"1\" connect=\"1\" arrows=\"1\" fold=\"1\" page=\"1\" pageScale=\"1\" pageWidth=\"827\" pageHeight=\"1169\">\\n'+\n  '  <root>\\n'+\n  '    <mxCell id=\"0\"/>\\n'+\n  '    <mxCell id=\"1\" parent=\"0\"/>\\n'+\n  '    <mxCell id=\"5\" style=\"rounded=0;html=1;entryX=0.5;entryY=0;jettySize=auto;orthogonalLoop=1;edgeStyle=orthogonalEdgeStyle;curved=1;\" edge=\"1\" parent=\"1\" source=\"2\" target=\"3\">\\n'+\n  '      <mxGeometry relative=\"1\" as=\"geometry\"/>\\n'+\n  '    </mxCell>\\n'+\n  '    <mxCell id=\"6\" style=\"edgeStyle=orthogonalEdgeStyle;curved=1;rounded=0;html=1;jettySize=auto;orthogonalLoop=1;\" edge=\"1\" parent=\"1\" source=\"2\" target=\"4\">\\n'+\n  '      <mxGeometry relative=\"1\" as=\"geometry\"/>\\n'+\n  '    </mxCell>\\n'+\n  '    <object label=\"Hello\" composite=\"Hello\" id=\"2\">\\n'+\n  '      <mxCell style=\"rounded=1;whiteSpace=wrap;html=1;gradientColor=#ffffff;fillColor=#00FF00;\" parent=\"1\" vertex=\"1\">\\n'+\n  '        <mxGeometry x=\"340\" y=\"180\" width=\"120\" height=\"60\" as=\"geometry\"/>\\n'+\n  '      </mxCell>\\n'+\n  '    </object>\\n'+\n  '    <object label=\"mxGraph\" composite=\"World\" id=\"3\">\\n'+\n  '      <mxCell style=\"ellipse;whiteSpace=wrap;html=1;aspect=fixed;gradientColor=#ffffff;fillColor=#E580FF;\" parent=\"1\" vertex=\"1\">\\n'+\n  '        <mxGeometry x=\"274\" y=\"320\" width=\"80\" height=\"80\" as=\"geometry\"/>\\n'+\n  '      </mxCell>\\n'+\n  '    </object>\\n'+\n  '    <mxCell id=\"4\" value=\"Grafana\" style=\"shape=mxgraph.flowchart.display;whiteSpace=wrap;html=1;fillColor=#FF7654;strokeColor=#000000;strokeWidth=2;gradientColor=#ffffff;\" vertex=\"1\" parent=\"1\">\\n'+\n  '      <mxGeometry x=\"440\" y=\"330\" width=\"98\" height=\"60\" as=\"geometry\"/>\\n'+\n  '    </mxCell>\\n'+\n  '    <mxCell id=\"7\" value=\"Author : Arnaud GENTY&lt;br&gt;&lt;div style=&quot;text-align: left&quot;&gt;Manthor :&amp;nbsp;&lt;span&gt;Jeremy&amp;nbsp;&lt;/span&gt;&lt;span&gt;jdbranham&lt;/span&gt;&lt;/div&gt;\" style=\"text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;\" vertex=\"1\" parent=\"1\">\\n'+\n  '      <mxGeometry x=\"260\" y=\"407\" width=\"280\" height=\"40\" as=\"geometry\"/>\\n'+\n  '    </mxCell>\\n'+\n  '  </root>\\n'+\n  '</mxGraphModel>\\n',\n  shapes: [],\n  values: [],\n  graph : null,\n  legend: {\n    show: true,\n    min: true,\n    max: true,\n    avg: true,\n    current: true,\n    total: true,\n    gradient: {\n      enabled: true,\n      show: true\n    }\n  },\n  links: [],\n  datasource: null,\n  maxDataPoints: 3,\n  interval: null,\n  targets: [{}],\n  cacheTimeout: null,\n  nullPointMode: 'connected',\n  legendType: 'Under graph',\n  breakPoint: '50%',\n  aliasColors: {},\n  format: 'short',\n  valueName: 'current',\n  strokeWidth: 1,\n  fontSize: '80%',\n  combine: {\n    threshold: 0.0,\n    label: 'Others'\n  }\n};\n\n\nexport class FlowchartCtrl extends MetricsPanelCtrl {\n\n  constructor($scope, $injector, $sce, $http) {\n    super($scope, $injector);\n    _.defaults(this.panel, panelDefaults);\n    this.$http = $http;\n    this.panel.graphId = 'flowchart_' + this.panel.id;\n    this.containerDivId = 'container_' + this.panel.graphId;\n    this.$sce = $sce;\n\n\n    // events\n    this.events.on('render', this.onRender.bind(this));\n    this.events.on('refresh', this.onRender.bind(this));\n    this.events.on('data-received', this.onDataReceived.bind(this));\n    this.events.on('data-error', this.onDataError.bind(this));\n    this.events.on('data-snapshot-load', this.onDataReceived.bind(this));\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n\n    this.onRender();\n\n  }\n\n  initializeMxgraph() {\n    // initialize mxClient\n    // Checks if browser is supported\n    // if (!mxClient.isBrowserSupported())\n    // {\n    //   // Displays an error message if the browser is\n    //   // not supported.\n    //   mxUtils.error('Browser is not supported!', 200, false);\n    // }\n    // else\n    // {\n    //   // Creates the graph inside the given container\n    //   if ( this.graph != null) {\n    //     graph = new mxGraph(this.getFlowchartContainer());\n    //   }\n    //   graph.getModel().beginUpdate();\n    //   try{\n    //     var dec = new mxCodec(root.ownerDocument);\n    //     dec.decode(root, graph.getModel());\n    //   }\n    //   finally{\n    //     // Updates the display\n    //     graph.getModel().endUpdate();\n    //   }\n    // }\n  }\n\n  getFlowchartContainer() {\n    return $(document.getElementById(this.containerDivId));\n  }\n\n\n  onInitEditMode() {\n    this.addEditorTab('Flowchart', flowchartEditor, 2);\n    this.addEditorTab('Display', displayEditor, 3);\n    this.addEditorTab('Metric Shapes', shapeEditor, 4);\n    this.addEditorTab('Metric Values', valueEditor, 5);\n  }\n\n  onRender() {\n    // initializeMxgraph();\n  }\n\n  onDataReceived() {\n    //TODO : complete\n  }\n\n  onDataError() {\n    // TODO:\n  }\n\n\n}\n\nFlowchartCtrl.templateUrl = 'module.html';\n"]}