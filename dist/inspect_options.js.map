{"version":3,"sources":["../src/inspect_options.js"],"names":["InspectOptionsCtrl","$scope","editor","ctrl","panel","colors","style","text","value","colorMode","logDisplayOption","logDisplay","logLevelOption","logLevel","flowchartHandler","doBlur","$event","console","log","target","blur","panelCtrl","render","styleIndex","colorIndex","newColor","window","state","newcellId","undefined","cellId","getFlowchart","getStateHandler","edited","previousId","edit","elt","document","getElementById","setTimeout","focus","draw","refresh","flowchart","states","getStates","forEach","renameId","applyModel","xgraph","getXGraph","selectMxCells","unselectMxCells","inspectOptionsTab","$q","uiSegmentSrv","restrict","scope","templateUrl","plugin","id","controller"],"mappings":"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","sourcesContent":["import { plugin } from './plugin';\r\n\r\nexport class InspectOptionsCtrl {\r\n  /** @ngInject */\r\n  constructor($scope) {\r\n    $scope.editor = this;\r\n    this.$scope = $scope;\r\n    this.ctrl = $scope.ctrl;\r\n    this.panel = this.ctrl.panel;\r\n    this.colors = ['rgba(245, 54, 54, 0.9)', 'rgba(237, 129, 40, 0.89)', 'rgba(50, 172, 45, 0.97)'];\r\n    this.style = [\r\n      { text: 'Disabled', value: null },\r\n      { text: 'Stroke', value: 'strokeColor' },\r\n      { text: 'Fill', value: 'fillColor' },\r\n      { text: 'Text', value: 'fontColor' }\r\n    ];\r\n    this.colorMode = 'fillColor';\r\n    this.logDisplayOption = [{ text: 'True', value: true }, { text: 'False', value: false }];\r\n    this.logDisplay = logDisplay;\r\n    this.logLevelOption = [\r\n      { text: 'DEBUG', value: 0 },\r\n      { text: 'INFO', value: 1 },\r\n      { text: 'WARNING', value: 2 },\r\n      { text: 'ERROR', value: 3 }\r\n    ];\r\n    this.logLevel = logLevel;\r\n    this.flowchartHandler = this.ctrl.flowchartHandler;\r\n    $scope.flowchartHandler = this.ctrl.flowchartHandler;\r\n\r\n    $scope.doBlur = function ($event) {\r\n      console.log(\"$event\", $event);\r\n      const target = $event.target;\r\n      target.blur();\r\n    };\r\n  }\r\n\r\n  render() {\r\n    this.panelCtrl.render();\r\n  }\r\n\r\n  onColorChange(styleIndex, colorIndex) {\r\n    return (newColor) => {\r\n      this.colors[colorIndex] = newColor;\r\n    };\r\n  }\r\n\r\n  onDebug() {\r\n    window.logLevel = this.logLevel;\r\n    window.logDisplay = this.logDisplay;\r\n  }\r\n\r\n  onChangeId(state) {\r\n    if (state.newcellId !== undefined && state.cellId !== state.newcellId) {\r\n      this.flowchartHandler.getFlowchart(0).getStateHandler().edited = true;\r\n      if (state.previousId === undefined) state.previousId = state.cellId;\r\n      state.cellId = state.newcellId;\r\n      state.edited = true;\r\n    }\r\n    state.edit = false;\r\n  }\r\n\r\n  onEdit(state) {\r\n    state.edit = true;\r\n    state.newcellId = state.cellId;\r\n    let elt = document.getElementById(state.cellId);\r\n    setTimeout(function() {\r\n      elt.focus();\r\n    }, 100);\r\n  }\r\n\r\n  reset() {\r\n    this.flowchartHandler.draw();\r\n    this.flowchartHandler.refresh();\r\n    // this.$scope.$apply();\r\n  }\r\n\r\n  apply() {\r\n    const flowchart = this.flowchartHandler.getFlowchart(0);\r\n    const states = flowchart.getStateHandler().getStates();\r\n    states.forEach((state) => {\r\n      if (state.edited) flowchart.renameId(state.previousId, state.cellId);\r\n    });\r\n    flowchart.applyModel();\r\n  }\r\n\r\n  selectCell(state) {\r\n    const flowchart = this.flowchartHandler.getFlowchart(0);\r\n    const xgraph = flowchart.getXGraph();\r\n    if (state.edited) xgraph.selectMxCells('id', state.previousId);\r\n    else xgraph.selectMxCells('id', state.cellId);\r\n  }\r\n\r\n  unselectCell() {\r\n    const flowchart = this.flowchartHandler.getFlowchart(0);\r\n    const xgraph = flowchart.getXGraph();\r\n    xgraph.unselectMxCells();\r\n  }\r\n}\r\n\r\n/** @ngInject */\r\nexport function inspectOptionsTab($q, uiSegmentSrv) {\r\n  'use strict';\r\n  return {\r\n    restrict: 'E',\r\n    scope: true,\r\n    templateUrl: `public/plugins/${plugin.id}/partials/inspect_options.html`,\r\n    controller: InspectOptionsCtrl\r\n  };\r\n}\r\n"],"file":"inspect_options.js"}