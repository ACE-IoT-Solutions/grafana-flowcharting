{"version":3,"sources":["../src/statesHandler.js"],"names":["StateHandler","xgraph","u","log","states","initStates","cellId","foundState","state","mxcell","State","push","_","without","cells","getAllMxCells","each","cell","addState","length","level","count","forEach","getLevel","prepare","rules","series","rule","serie","setState","applyState"],"mappings":";;;;;;;AACA;;;;;;;;;;IAEqBA,Y;;;AACnB;AACA,wBAAYC,MAAZ,EAAoB;AAAA;;AAClBC,IAAAA,CAAC,CAACC,GAAF,CAAM,CAAN,EAAS,4BAAT;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKH,MAAL,GAAcA,MAAd;AACA,SAAKI,UAAL,CAAgB,KAAKJ,MAArB;AACD;;;;gCAEW;AACV,aAAO,KAAKG,MAAZ;AACD;;;6BAEQE,M,EAAQ;AACf,UAAIC,UAAU,GAAG,IAAjB;AADe;AAAA;AAAA;;AAAA;AAEf,6BAAkB,KAAKH,MAAvB,8HAA+B;AAAA,cAAtBI,KAAsB;AAC7B,cAAIF,MAAM,IAAIE,KAAK,CAACF,MAApB,EAA4BC,UAAU,GAAGC,KAAb;AAC5B;AACD;AALc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMf,aAAOD,UAAP;AACD;;;6BAEQE,M,EAAQ;AACf,UAAID,KAAK,GAAG,IAAIE,oBAAJ,CAAUD,MAAV,EAAkB,KAAKR,MAAvB,CAAZ;AACA,WAAKG,MAAL,CAAYO,IAAZ,CAAiBH,KAAjB;AACD;;;gCAEWC,M,EAAQ;AAClB,WAAKL,MAAL,GAAcQ,CAAC,CAACC,OAAF,CAAU,KAAKT,MAAf,EAAuBK,MAAvB,CAAd;AACD;;;+BAEUR,M,EAAQ;AAAA;;AACjB,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAKG,MAAL,GAAc,EAAd;AACA,UAAIU,KAAK,GAAG,KAAKb,MAAL,CAAYc,aAAZ,EAAZ;;AACAH,MAAAA,CAAC,CAACI,IAAF,CAAOF,KAAP,EAAc,UAAAG,IAAI,EAAI;AACpB,QAAA,KAAI,CAACC,QAAL,CAAcD,IAAd;AACD,OAFD;AAGD;;;kCAEa;AACZ,aAAO,KAAKb,MAAL,CAAYe,MAAnB;AACD;;;yCAEoBC,K,EAAO;AAC1B,UAAIC,KAAK,GAAG,CAAZ;AACA,WAAKjB,MAAL,CAAYkB,OAAZ,CAAoB,UAAAd,KAAK,EAAI;AAC3B,YAAIA,KAAK,CAACe,QAAN,MAAoBH,KAAxB,EAA+BC,KAAK;AACrC,OAFD;AAGA,aAAOA,KAAP;AACD;;;8BAES;AACR,WAAKjB,MAAL,CAAYkB,OAAZ,CAAoB,UAAAd,KAAK,EAAI;AAC3BA,QAAAA,KAAK,CAACgB,OAAN;AACD,OAFD;AAGD;;;8BAESC,K,EAAOC,M,EAAQ;AACvBxB,MAAAA,CAAC,CAACC,GAAF,CAAM,CAAN,EAAS,0BAAT;AACAD,MAAAA,CAAC,CAACC,GAAF,CAAM,CAAN,EAAS,iCAAT,EAA4CsB,KAA5C;AACAvB,MAAAA,CAAC,CAACC,GAAF,CAAM,CAAN,EAAS,kCAAT,EAA6CuB,MAA7C;AACA,WAAKF,OAAL;AACA,WAAKpB,MAAL,CAAYkB,OAAZ,CAAoB,UAAAd,KAAK,EAAI;AAC3BiB,QAAAA,KAAK,CAACH,OAAN,CAAc,UAAAK,IAAI,EAAI;AACpBD,UAAAA,MAAM,CAACJ,OAAP,CAAe,UAAAM,KAAK,EAAI;AACtBpB,YAAAA,KAAK,CAACqB,QAAN,CAAeF,IAAf,EAAqBC,KAArB;AACD,WAFD;AAGD,SAJD;AAKD,OAND;AAOD;;;kCAEa;AACZ1B,MAAAA,CAAC,CAACC,GAAF,CAAM,CAAN,EAAS,4BAAT;AACA,WAAKC,MAAL,CAAYkB,OAAZ,CAAoB,UAAAd,KAAK,EAAI;AAC3BA,QAAAA,KAAK,CAACsB,UAAN;AACD,OAFD;AAGD","sourcesContent":["/* global u */\nimport State from './state_class';\n\nexport default class StateHandler {\n  /** @ngInject */\n  constructor(xgraph) {\n    u.log(1, 'StateHandler.constructor()');\n    this.states = [];\n    this.xgraph = xgraph;\n    this.initStates(this.xgraph);\n  }\n\n  getStates() {\n    return this.states;\n  }\n\n  getState(cellId) {\n    let foundState = null;\n    for (let state of this.states) {\n      if (cellId == state.cellId) foundState = state;\n      break;\n    }\n    return foundState;\n  }\n\n  addState(mxcell) {\n    let state = new State(mxcell, this.xgraph);\n    this.states.push(state);\n  }\n\n  removeState(mxcell) {\n    this.states = _.without(this.states, mxcell);\n  }\n\n  initStates(xgraph) {\n    this.xgraph = xgraph;\n    this.states = [];\n    let cells = this.xgraph.getAllMxCells();\n    _.each(cells, cell => {\n      this.addState(cell);\n    });\n  }\n\n  countStates() {\n    return this.states.length;\n  }\n\n  countStatesWithLevel(level) {\n    let count = 0;\n    this.states.forEach(state => {\n      if (state.getLevel() == level) count++;\n    });\n    return count;\n  }\n\n  prepare() {\n    this.states.forEach(state => {\n      state.prepare();\n    });\n  }\n\n  setStates(rules, series) {\n    u.log(1, 'StateHandler.setStates()');\n    u.log(0, 'StatesHandler.setStates() Rules', rules);\n    u.log(0, 'StatesHandler.setStates() Series', series);\n    this.prepare();\n    this.states.forEach(state => {\n      rules.forEach(rule => {\n        series.forEach(serie => {\n          state.setState(rule, serie);\n        });\n      });\n    });\n  }\n\n  applyStates() {\n    u.log(1, 'StateHandler.applyStates()');\n    this.states.forEach(state => {\n      state.applyState();\n    });\n  }\n}\n"],"file":"statesHandler.js"}