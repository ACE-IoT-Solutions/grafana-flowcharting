{"version":3,"sources":["../src/statesHandler.js"],"names":["StateHandler","xgraph","u","log","states","initStates","cellId","foundState","state","mxcell","State","push","_","without","mxcells","getMxCells","each","addState","length","level","count","forEach","getLevel","prepare","rules","series","rule","serie","setState","applyState"],"mappings":";;;;;;;AACA;;;;;;;;;;IAEqBA,Y;;;AACnB;AACA,wBAAYC,MAAZ,EAAoB;AAAA;;AAClBC,IAAAA,CAAC,CAACC,GAAF,CAAM,CAAN,EAAS,4BAAT;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKH,MAAL,GAAcA,MAAd;AACA,SAAKI,UAAL,CAAgB,KAAKJ,MAArB;AACD;;;;gCAEW;AACV,aAAO,KAAKG,MAAZ;AACD;;;6BAEQE,M,EAAQ;AACf,UAAIC,UAAU,GAAG,IAAjB;AADe;AAAA;AAAA;;AAAA;AAEf,6BAAkB,KAAKH,MAAvB,8HAA+B;AAAA,cAAtBI,KAAsB;AAC7B,cAAIF,MAAM,IAAIE,KAAK,CAACF,MAApB,EAA4BC,UAAU,GAAGC,KAAb;AAC5B;AACD;AALc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMf,aAAOD,UAAP;AACD;;;6BAEQE,M,EAAQ;AACf,UAAMD,KAAK,GAAG,IAAIE,oBAAJ,CAAUD,MAAV,EAAkB,KAAKR,MAAvB,CAAd;AACA,WAAKG,MAAL,CAAYO,IAAZ,CAAiBH,KAAjB;AACD;;;gCAEWC,M,EAAQ;AAClB,WAAKL,MAAL,GAAcQ,CAAC,CAACC,OAAF,CAAU,KAAKT,MAAf,EAAuBK,MAAvB,CAAd;AACD;;;+BAEUR,M,EAAQ;AAAA;;AACjB,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAKG,MAAL,GAAc,EAAd;AACA,UAAMU,OAAO,GAAG,KAAKb,MAAL,CAAYc,UAAZ,EAAhB;;AACAH,MAAAA,CAAC,CAACI,IAAF,CAAOF,OAAP,EAAgB,UAACL,MAAD,EAAY;AAC1B,QAAA,KAAI,CAACQ,QAAL,CAAcR,MAAd;AACD,OAFD;AAGD;;;kCAEa;AACZ,aAAO,KAAKL,MAAL,CAAYc,MAAnB;AACD;;;yCAEoBC,K,EAAO;AAC1B,UAAIC,KAAK,GAAG,CAAZ;AACA,WAAKhB,MAAL,CAAYiB,OAAZ,CAAoB,UAACb,KAAD,EAAW;AAC7B,YAAIA,KAAK,CAACc,QAAN,OAAqBH,KAAzB,EAAgCC,KAAK,IAAI,CAAT;AACjC,OAFD;AAGA,aAAOA,KAAP;AACD;;;8BAES;AACR,WAAKhB,MAAL,CAAYiB,OAAZ,CAAoB,UAACb,KAAD,EAAW;AAC7BA,QAAAA,KAAK,CAACe,OAAN;AACD,OAFD;AAGD;;;8BAESC,K,EAAOC,M,EAAQ;AACvBvB,MAAAA,CAAC,CAACC,GAAF,CAAM,CAAN,EAAS,0BAAT;AACAD,MAAAA,CAAC,CAACC,GAAF,CAAM,CAAN,EAAS,iCAAT,EAA4CqB,KAA5C;AACAtB,MAAAA,CAAC,CAACC,GAAF,CAAM,CAAN,EAAS,kCAAT,EAA6CsB,MAA7C;AACA,WAAKF,OAAL;AACA,WAAKnB,MAAL,CAAYiB,OAAZ,CAAoB,UAACb,KAAD,EAAW;AAC7BgB,QAAAA,KAAK,CAACH,OAAN,CAAc,UAACK,IAAD,EAAU;AACtBD,UAAAA,MAAM,CAACJ,OAAP,CAAe,UAACM,KAAD,EAAW;AACxBnB,YAAAA,KAAK,CAACoB,QAAN,CAAeF,IAAf,EAAqBC,KAArB;AACD,WAFD;AAGD,SAJD;AAKD,OAND;AAOD;;;kCAEa;AACZzB,MAAAA,CAAC,CAACC,GAAF,CAAM,CAAN,EAAS,4BAAT;AACA,WAAKC,MAAL,CAAYiB,OAAZ,CAAoB,UAACb,KAAD,EAAW;AAC7BA,QAAAA,KAAK,CAACqB,UAAN;AACD,OAFD;AAGD","sourcesContent":["/* global u */\nimport State from './state_class';\n\nexport default class StateHandler {\n  /** @ngInject */\n  constructor(xgraph) {\n    u.log(1, 'StateHandler.constructor()');\n    this.states = [];\n    this.xgraph = xgraph;\n    this.initStates(this.xgraph);\n  }\n\n  getStates() {\n    return this.states;\n  }\n\n  getState(cellId) {\n    let foundState = null;\n    for (let state of this.states) {\n      if (cellId == state.cellId) foundState = state;\n      break;\n    }\n    return foundState;\n  }\n\n  addState(mxcell) {\n    const state = new State(mxcell, this.xgraph);\n    this.states.push(state);\n  }\n\n  removeState(mxcell) {\n    this.states = _.without(this.states, mxcell);\n  }\n\n  initStates(xgraph) {\n    this.xgraph = xgraph;\n    this.states = [];\n    const mxcells = this.xgraph.getMxCells();\n    _.each(mxcells, (mxcell) => {\n      this.addState(mxcell);\n    });\n  }\n\n  countStates() {\n    return this.states.length;\n  }\n\n  countStatesWithLevel(level) {\n    let count = 0;\n    this.states.forEach((state) => {\n      if (state.getLevel() === level) count += 1;\n    });\n    return count;\n  }\n\n  prepare() {\n    this.states.forEach((state) => {\n      state.prepare();\n    });\n  }\n\n  setStates(rules, series) {\n    u.log(1, 'StateHandler.setStates()');\n    u.log(0, 'StatesHandler.setStates() Rules', rules);\n    u.log(0, 'StatesHandler.setStates() Series', series);\n    this.prepare();\n    this.states.forEach((state) => {\n      rules.forEach((rule) => {\n        series.forEach((serie) => {\n          state.setState(rule, serie);\n        });\n      });\n    });\n  }\n\n  applyStates() {\n    u.log(1, 'StateHandler.applyStates()');\n    this.states.forEach((state) => {\n      state.applyState();\n    });\n  }\n}\n"],"file":"statesHandler.js"}