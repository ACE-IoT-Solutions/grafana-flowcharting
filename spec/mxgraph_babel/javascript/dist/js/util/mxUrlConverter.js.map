{"version":3,"sources":["../../../../../../src/mxgraph/javascript/dist/js/util/mxUrlConverter.js"],"names":["mxUrlConverter","prototype","enabled","baseUrl","baseDomain","updateBaseUrl","location","protocol","host","pathname","tmp","lastIndexOf","substring","isEnabled","setEnabled","value","getBaseUrl","setBaseUrl","getBaseDomain","setBaseDomain","isRelativeUrl","url","convert","charAt","__mxOutput","undefined"],"mappings":";;;;;;;;;AAUIA,oB,GAAiB,SAAjBA,cAAiB,GACrB;AACC;AACA,O;;AAED;;;;;AAKAA,qBAAeC,SAAf,CAAyBC,OAAzB,GAAmC,IAAnC;;AAEA;;;;;AAKAF,qBAAeC,SAAf,CAAyBE,OAAzB,GAAmC,IAAnC;;AAEA;;;;;AAKAH,qBAAeC,SAAf,CAAyBG,UAAzB,GAAsC,IAAtC;;AAEA;;;;;AAKAJ,qBAAeC,SAAf,CAAyBI,aAAzB,GAAyC,YACzC;AACC,aAAKD,UAAL,GAAkBE,SAASC,QAAT,GAAoB,IAApB,GAA2BD,SAASE,IAAtD;AACA,aAAKL,OAAL,GAAe,KAAKC,UAAL,GAAkBE,SAASG,QAA1C;AACA,YAAIC,MAAM,KAAKP,OAAL,CAAaQ,WAAb,CAAyB,GAAzB,CAAV;;AAEA;AACA,YAAID,MAAM,CAAV,EACA;AACC,eAAKP,OAAL,GAAe,KAAKA,OAAL,CAAaS,SAAb,CAAuB,CAAvB,EAA0BF,MAAM,CAAhC,CAAf;AACA;AACD,OAXD;;AAaA;;;;;AAKAV,qBAAeC,SAAf,CAAyBY,SAAzB,GAAqC,YACrC;AACC,eAAO,KAAKX,OAAZ;AACA,OAHD;;AAKA;;;;;AAKAF,qBAAeC,SAAf,CAAyBa,UAAzB,GAAsC,UAASC,KAAT,EACtC;AACC,aAAKb,OAAL,GAAea,KAAf;AACA,OAHD;;AAKA;;;;;AAKAf,qBAAeC,SAAf,CAAyBe,UAAzB,GAAsC,YACtC;AACC,eAAO,KAAKb,OAAZ;AACA,OAHD;;AAKA;;;;;AAKAH,qBAAeC,SAAf,CAAyBgB,UAAzB,GAAsC,UAASF,KAAT,EACtC;AACC,aAAKZ,OAAL,GAAeY,KAAf;AACA,OAHD;;AAKA;;;;;AAKAf,qBAAeC,SAAf,CAAyBiB,aAAzB,GAAyC,YACzC;AACC,eAAO,KAAKd,UAAZ;AACA,OAHD;;AAKA;;;;;AAKAJ,qBAAeC,SAAf,CAAyBkB,aAAzB,GAAyC,UAASJ,KAAT,EACzC;AACC,aAAKX,UAAL,GAAkBW,KAAlB;AACA,OAbD;;AAeA;;;;;AAKAf,qBAAeC,SAAf,CAAyBmB,aAAzB,GAAyC,UAASC,GAAT,EACzC;AACC,eAAOA,IAAIT,SAAJ,CAAc,CAAd,EAAiB,CAAjB,KAAuB,IAAvB,IAA+BS,IAAIT,SAAJ,CAAc,CAAd,EAAiB,CAAjB,KAAuB,SAAtD,IACNS,IAAIT,SAAJ,CAAc,CAAd,EAAiB,CAAjB,KAAuB,UADjB,IAC+BS,IAAIT,SAAJ,CAAc,CAAd,EAAiB,EAAjB,KAAwB,YADvD,IAENS,IAAIT,SAAJ,CAAc,CAAd,EAAiB,CAAjB,KAAuB,SAFxB;AAGA,OAzBD;;AA2BA;;;;;;AAMAZ,qBAAeC,SAAf,CAAyBqB,OAAzB,GAAmC,UAASD,GAAT,EACnC;AACC,YAAI,KAAKR,SAAL,MAAoB,KAAKO,aAAL,CAAmBC,GAAnB,CAAxB,EACA;AACC,cAAI,KAAKL,UAAL,MAAqB,IAAzB,EACA;AACC,iBAAKX,aAAL;AACA;;AAED,cAAIgB,IAAIE,MAAJ,CAAW,CAAX,KAAiB,GAArB,EACA;AACCF,kBAAM,KAAKH,aAAL,KAAuBG,GAA7B;AACA,WAHD,MAKA;AACCA,kBAAM,KAAKL,UAAL,KAAoBK,GAA1B;AACA;AACD;;AAED,eAAOA,GAAP;AACA,OApBD;;AAsBAG,iBAAWxB,cAAX,GAA4B,OAAOA,cAAP,KAA0B,WAA1B,GAAwCA,cAAxC,GAAyDyB,SAArF","file":"mxUrlConverter.js","sourcesContent":["/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n *\n * Class: mxUrlConverter\n * \n * Converts relative and absolute URLs to absolute URLs with protocol and domain.\n */\nvar mxUrlConverter = function()\n{\n\t// Empty constructor\n};\n\n/**\n * Variable: enabled\n * \n * Specifies if the converter is enabled. Default is true.\n */\nmxUrlConverter.prototype.enabled = true;\n\n/**\n * Variable: baseUrl\n * \n * Specifies the base URL to be used as a prefix for relative URLs.\n */\nmxUrlConverter.prototype.baseUrl = null;\n\n/**\n * Variable: baseDomain\n * \n * Specifies the base domain to be used as a prefix for absolute URLs.\n */\nmxUrlConverter.prototype.baseDomain = null;\n\n/**\n * Function: updateBaseUrl\n * \n * Private helper function to update the base URL.\n */\nmxUrlConverter.prototype.updateBaseUrl = function()\n{\n\tthis.baseDomain = location.protocol + '//' + location.host;\n\tthis.baseUrl = this.baseDomain + location.pathname;\n\tvar tmp = this.baseUrl.lastIndexOf('/');\n\t\n\t// Strips filename etc\n\tif (tmp > 0)\n\t{\n\t\tthis.baseUrl = this.baseUrl.substring(0, tmp + 1);\n\t}\n};\n\n/**\n * Function: isEnabled\n * \n * Returns <enabled>.\n */\nmxUrlConverter.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Sets <enabled>.\n */\nmxUrlConverter.prototype.setEnabled = function(value)\n{\n\tthis.enabled = value;\n};\n\n/**\n * Function: getBaseUrl\n * \n * Returns <baseUrl>.\n */\nmxUrlConverter.prototype.getBaseUrl = function()\n{\n\treturn this.baseUrl;\n};\n\n/**\n * Function: setBaseUrl\n * \n * Sets <baseUrl>.\n */\nmxUrlConverter.prototype.setBaseUrl = function(value)\n{\n\tthis.baseUrl = value;\n};\n\n/**\n * Function: getBaseDomain\n * \n * Returns <baseDomain>.\n */\nmxUrlConverter.prototype.getBaseDomain = function()\n{\n\treturn this.baseDomain;\n},\n\n/**\n * Function: setBaseDomain\n * \n * Sets <baseDomain>.\n */\nmxUrlConverter.prototype.setBaseDomain = function(value)\n{\n\tthis.baseDomain = value;\n},\n\n/**\n * Function: isRelativeUrl\n * \n * Returns true if the given URL is relative.\n */\nmxUrlConverter.prototype.isRelativeUrl = function(url)\n{\n\treturn url.substring(0, 2) != '//' && url.substring(0, 7) != 'http://' &&\n\t\turl.substring(0, 8) != 'https://' && url.substring(0, 10) != 'data:image' &&\n\t\turl.substring(0, 7) != 'file://';\n};\n\n/**\n * Function: convert\n * \n * Converts the given URL to an absolute URL with protol and domain.\n * Relative URLs are first converted to absolute URLs.\n */\nmxUrlConverter.prototype.convert = function(url)\n{\n\tif (this.isEnabled() && this.isRelativeUrl(url))\n\t{\n\t\tif (this.getBaseUrl() == null)\n\t\t{\n\t\t\tthis.updateBaseUrl();\n\t\t}\n\t\t\n\t\tif (url.charAt(0) == '/')\n\t\t{\n\t\t\turl = this.getBaseDomain() + url;\n\t\t}\n\t\telse\n\t\t{\n\t\t\turl = this.getBaseUrl() + url;\n\t\t}\n\t}\n\t\n\treturn url;\n};\n\n__mxOutput.mxUrlConverter = typeof mxUrlConverter !== 'undefined' ? mxUrlConverter : undefined;\n"]}