{"version":3,"sources":["../../../../../../src/mxgraph/javascript/dist/js/util/mxPopupMenu.js"],"names":["mxPopupMenu","factoryMethod","init","prototype","mxEventSource","constructor","submenuImage","mxClient","imageBasePath","zIndex","useLeftButtonForPopup","enabled","itemCount","autoExpand","smartSeparators","labels","table","document","createElement","className","tbody","appendChild","div","style","display","mxEvent","disableContextMenu","isEnabled","setEnabled","isPopupTrigger","me","isLeftMouseButton","getEvent","addItem","title","image","funct","parent","iconCls","active","willAddSeparator","containsItems","addSeparator","tr","col1","img","src","col2","mxUtils","write","align","col3","paddingRight","textAlign","createSubmenu","currentSelection","addGestureListeners","bind","evt","eventReceiver","activeRow","parentNode","hideSubmenu","showSubmenu","IS_QUIRKS","documentMode","selection","createRange","consume","hideMenu","select","e","addListener","addCheckmark","item","td","firstChild","nextSibling","backgroundImage","backgroundRepeat","backgroundPosition","position","setAttribute","row","left","offsetLeft","offsetWidth","top","offsetTop","body","parseInt","width","offset","getDocumentScrollOrigin","b","d","documentElement","right","x","clientWidth","Math","max","IS_IE","fit","force","padding","hr","popup","y","cell","release","removeChild","showMenu","fireEvent","mxEventObject","SHOW","isMenuShowing","filter","HIDE","destroy","__mxOutput","undefined"],"mappings":";;;;;AAAA;;;;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,UAASA,WAAT,CAAqBC,aAArB,EACA;AACC,OAAKA,aAAL,GAAqBA,aAArB;;AAEA,MAAIA,iBAAiB,IAArB,EACA;AACC,QAAKC,IAAL;AACA;AACD,E;;;AAAA;;AAED;;;AAGAF,eAAYG,SAAZ,GAAwB,IAAIC,aAAJ,EAAxB;AACAJ,eAAYG,SAAZ,CAAsBE,WAAtB,GAAoCL,WAApC;;AAEA;;;;;AAKAA,eAAYG,SAAZ,CAAsBG,YAAtB,GAAqCC,SAASC,aAAT,GAAyB,cAA9D;;AAEA;;;;;AAKAR,eAAYG,SAAZ,CAAsBM,MAAtB,GAA+B,KAA/B;;AAEA;;;;;;;AAOAT,eAAYG,SAAZ,CAAsBF,aAAtB,GAAsC,IAAtC;;AAEA;;;;;;AAMAD,eAAYG,SAAZ,CAAsBO,qBAAtB,GAA8C,KAA9C;;AAEA;;;;;AAKAV,eAAYG,SAAZ,CAAsBQ,OAAtB,GAAgC,IAAhC;;AAEA;;;;;AAKAX,eAAYG,SAAZ,CAAsBS,SAAtB,GAAkC,CAAlC;;AAEA;;;;;AAKAZ,eAAYG,SAAZ,CAAsBU,UAAtB,GAAmC,KAAnC;;AAEA;;;;;;AAMAb,eAAYG,SAAZ,CAAsBW,eAAtB,GAAwC,KAAxC;;AAEA;;;;;AAKAd,eAAYG,SAAZ,CAAsBY,MAAtB,GAA+B,IAA/B;;AAEA;;;;;AAKAf,eAAYG,SAAZ,CAAsBD,IAAtB,GAA6B,YAC7B;AACC;AACA,SAAKc,KAAL,GAAaC,SAASC,aAAT,CAAuB,OAAvB,CAAb;AACA,SAAKF,KAAL,CAAWG,SAAX,GAAuB,aAAvB;;AAEA,SAAKC,KAAL,GAAaH,SAASC,aAAT,CAAuB,OAAvB,CAAb;AACA,SAAKF,KAAL,CAAWK,WAAX,CAAuB,KAAKD,KAA5B;;AAEA;AACA,SAAKE,GAAL,GAAWL,SAASC,aAAT,CAAuB,KAAvB,CAAX;AACA,SAAKI,GAAL,CAASH,SAAT,GAAqB,aAArB;AACA,SAAKG,GAAL,CAASC,KAAT,CAAeC,OAAf,GAAyB,QAAzB;AACA,SAAKF,GAAL,CAASC,KAAT,CAAed,MAAf,GAAwB,KAAKA,MAA7B;AACA,SAAKa,GAAL,CAASD,WAAT,CAAqB,KAAKL,KAA1B;;AAEA;AACAS,YAAQC,kBAAR,CAA2B,KAAKJ,GAAhC;AACA,IAlBD;;AAoBA;;;;;;AAMAtB,eAAYG,SAAZ,CAAsBwB,SAAtB,GAAkC,YAClC;AACC,WAAO,KAAKhB,OAAZ;AACA,IAHD;;AAKA;;;;;;AAMAX,eAAYG,SAAZ,CAAsByB,UAAtB,GAAmC,UAASjB,OAAT,EACnC;AACC,SAAKA,OAAL,GAAeA,OAAf;AACA,IAHD;;AAKA;;;;;;;;;;AAUAX,eAAYG,SAAZ,CAAsB0B,cAAtB,GAAuC,UAASC,EAAT,EACvC;AACC,WAAOA,GAAGD,cAAH,MAAwB,KAAKnB,qBAAL,IAA8Be,QAAQM,iBAAR,CAA0BD,GAAGE,QAAH,EAA1B,CAA7D;AACA,IAHD;;AAKA;;;;;;;;;;;;;;;;;;;;AAoBAhC,eAAYG,SAAZ,CAAsB8B,OAAtB,GAAgC,UAASC,KAAT,EAAgBC,KAAhB,EAAuBC,KAAvB,EAA8BC,MAA9B,EAAsCC,OAAtC,EAA+C3B,OAA/C,EAAwD4B,MAAxD,EAChC;AACCF,aAASA,UAAU,IAAnB;AACA,SAAKzB,SAAL;;AAEA;AACA,QAAIyB,OAAOG,gBAAX,EACA;AACC,SAAIH,OAAOI,aAAX,EACA;AACC,WAAKC,YAAL,CAAkBL,MAAlB,EAA0B,IAA1B;AACA;;AAEDA,YAAOG,gBAAP,GAA0B,KAA1B;AACA;;AAEDH,WAAOI,aAAP,GAAuB,IAAvB;AACA,QAAIE,KAAK1B,SAASC,aAAT,CAAuB,IAAvB,CAAT;AACAyB,OAAGxB,SAAH,GAAe,iBAAf;AACA,QAAIyB,OAAO3B,SAASC,aAAT,CAAuB,IAAvB,CAAX;AACA0B,SAAKzB,SAAL,GAAiB,iBAAjB;;AAEA;AACA,QAAIgB,SAAS,IAAb,EACA;AACC,SAAIU,MAAM5B,SAASC,aAAT,CAAuB,KAAvB,CAAV;AACA2B,SAAIC,GAAJ,GAAUX,KAAV;AACAS,UAAKvB,WAAL,CAAiBwB,GAAjB;AACA,KALD,MAMK,IAAIP,WAAW,IAAf,EACL;AACC,SAAIhB,MAAML,SAASC,aAAT,CAAuB,KAAvB,CAAV;AACAI,SAAIH,SAAJ,GAAgBmB,OAAhB;AACAM,UAAKvB,WAAL,CAAiBC,GAAjB;AACA;;AAEDqB,OAAGtB,WAAH,CAAeuB,IAAf;;AAEA,QAAI,KAAK7B,MAAT,EACA;AACC,SAAIgC,OAAO9B,SAASC,aAAT,CAAuB,IAAvB,CAAX;AACA6B,UAAK5B,SAAL,GAAiB,qBACdR,WAAW,IAAX,IAAmB,CAACA,OAArB,GAAgC,aAAhC,GAAgD,EADjC,CAAjB;;AAGAqC,aAAQC,KAAR,CAAcF,IAAd,EAAoBb,KAApB;AACAa,UAAKG,KAAL,GAAa,MAAb;AACAP,QAAGtB,WAAH,CAAe0B,IAAf;;AAEA,SAAII,OAAOlC,SAASC,aAAT,CAAuB,IAAvB,CAAX;AACAiC,UAAKhC,SAAL,GAAiB,qBACdR,WAAW,IAAX,IAAmB,CAACA,OAArB,GAAgC,aAAhC,GAAgD,EADjC,CAAjB;AAEAwC,UAAK5B,KAAL,CAAW6B,YAAX,GAA0B,KAA1B;AACAD,UAAK5B,KAAL,CAAW8B,SAAX,GAAuB,OAAvB;;AAEAV,QAAGtB,WAAH,CAAe8B,IAAf;;AAEA,SAAId,OAAOf,GAAP,IAAc,IAAlB,EACA;AACC,WAAKgC,aAAL,CAAmBjB,MAAnB;AACA;AACD;;AAEDA,WAAOjB,KAAP,CAAaC,WAAb,CAAyBsB,EAAzB;;AAEA,QAAIJ,UAAU,KAAV,IAAmB5B,WAAW,KAAlC,EACA;AACC,SAAI4C,mBAAmB,IAAvB;;AAEA9B,aAAQ+B,mBAAR,CAA4Bb,EAA5B,EACCK,QAAQS,IAAR,CAAa,IAAb,EAAmB,UAASC,GAAT,EACnB;AACC,WAAKC,aAAL,GAAqBhB,EAArB;;AAEA,UAAIN,OAAOuB,SAAP,IAAoBjB,EAApB,IAA0BN,OAAOuB,SAAP,IAAoBvB,MAAlD,EACA;AACC,WAAIA,OAAOuB,SAAP,IAAoB,IAApB,IAA4BvB,OAAOuB,SAAP,CAAiBtC,GAAjB,CAAqBuC,UAArB,IAAmC,IAAnE,EACA;AACC,aAAKC,WAAL,CAAiBzB,MAAjB;AACA;;AAED,WAAIM,GAAGrB,GAAH,IAAU,IAAd,EACA;AACC,aAAKyC,WAAL,CAAiB1B,MAAjB,EAAyBM,EAAzB;AACAN,eAAOuB,SAAP,GAAmBjB,EAAnB;AACA;AACD;;AAED;AACA,UAAIpC,SAASyD,SAAT,IAAsB/C,SAASgD,YAAT,IAAyB,CAAnD,EACA;AACCV,0BAAmBtC,SAASiD,SAAT,CAAmBC,WAAnB,EAAnB;AACA;;AAED1C,cAAQ2C,OAAR,CAAgBV,GAAhB;AACA,MAzBD,CADD,EA2BCV,QAAQS,IAAR,CAAa,IAAb,EAAmB,UAASC,GAAT,EACnB;AACC,UAAIrB,OAAOuB,SAAP,IAAoBjB,EAApB,IAA0BN,OAAOuB,SAAP,IAAoBvB,MAAlD,EACA;AACC,WAAIA,OAAOuB,SAAP,IAAoB,IAApB,IAA4BvB,OAAOuB,SAAP,CAAiBtC,GAAjB,CAAqBuC,UAArB,IAAmC,IAAnE,EACA;AACC,aAAKC,WAAL,CAAiBzB,MAAjB;AACA;;AAED,WAAI,KAAKxB,UAAL,IAAmB8B,GAAGrB,GAAH,IAAU,IAAjC,EACA;AACC,aAAKyC,WAAL,CAAiB1B,MAAjB,EAAyBM,EAAzB;AACAN,eAAOuB,SAAP,GAAmBjB,EAAnB;AACA;AACD;;AAED;AACAA,SAAGxB,SAAH,GAAe,sBAAf;AACA,MAlBD,CA3BD,EA8CC6B,QAAQS,IAAR,CAAa,IAAb,EAAmB,UAASC,GAAT,EACnB;AACC;AACA;AACA,UAAI,KAAKC,aAAL,IAAsBhB,EAA1B,EACA;AACC,WAAIN,OAAOuB,SAAP,IAAoBjB,EAAxB,EACA;AACC,aAAK0B,QAAL;AACA;;AAED;AACA,WAAId,oBAAoB,IAAxB,EACA;AACC;AACA,YACA;AACCA,0BAAiBe,MAAjB;AACA,SAHD,CAIA,OAAOC,CAAP,EACA;AACC;AACA;;AAEDhB,2BAAmB,IAAnB;AACA;;AAED,WAAInB,SAAS,IAAb,EACA;AACCA,cAAMsB,GAAN;AACA;AACD;;AAED,WAAKC,aAAL,GAAqB,IAArB;AACAlC,cAAQ2C,OAAR,CAAgBV,GAAhB;AACA,MAnCD,CA9CD;;AAoFA;AACAjC,aAAQ+C,WAAR,CAAoB7B,EAApB,EAAwB,UAAxB,EACCK,QAAQS,IAAR,CAAa,IAAb,EAAmB,UAASC,GAAT,EACnB;AACCf,SAAGxB,SAAH,GAAe,iBAAf;AACA,MAHD,CADD;AAMA;;AAED,WAAOwB,EAAP;AACA,IAlKD;;AAoKA;;;AAGA3C,eAAYG,SAAZ,CAAsBsE,YAAtB,GAAqC,UAASC,IAAT,EAAe7B,GAAf,EACrC;AACC,QAAI8B,KAAKD,KAAKE,UAAL,CAAgBC,WAAzB;AACAF,OAAGpD,KAAH,CAASuD,eAAT,GAA2B,WAAWjC,GAAX,GAAiB,KAA5C;AACA8B,OAAGpD,KAAH,CAASwD,gBAAT,GAA4B,WAA5B;AACAJ,OAAGpD,KAAH,CAASyD,kBAAT,GAA8B,SAA9B;AACA,IAND;;AAQA;;;;;;;;;;;AAWAhF,eAAYG,SAAZ,CAAsBmD,aAAtB,GAAsC,UAASjB,MAAT,EACtC;AACCA,WAAOrB,KAAP,GAAeC,SAASC,aAAT,CAAuB,OAAvB,CAAf;AACAmB,WAAOrB,KAAP,CAAaG,SAAb,GAAyB,aAAzB;;AAEAkB,WAAOjB,KAAP,GAAeH,SAASC,aAAT,CAAuB,OAAvB,CAAf;AACAmB,WAAOrB,KAAP,CAAaK,WAAb,CAAyBgB,OAAOjB,KAAhC;;AAEAiB,WAAOf,GAAP,GAAaL,SAASC,aAAT,CAAuB,KAAvB,CAAb;AACAmB,WAAOf,GAAP,CAAWH,SAAX,GAAuB,aAAvB;;AAEAkB,WAAOf,GAAP,CAAWC,KAAX,CAAiB0D,QAAjB,GAA4B,UAA5B;AACA5C,WAAOf,GAAP,CAAWC,KAAX,CAAiBC,OAAjB,GAA2B,QAA3B;AACAa,WAAOf,GAAP,CAAWC,KAAX,CAAiBd,MAAjB,GAA0B,KAAKA,MAA/B;;AAEA4B,WAAOf,GAAP,CAAWD,WAAX,CAAuBgB,OAAOrB,KAA9B;;AAEA,QAAI6B,MAAM5B,SAASC,aAAT,CAAuB,KAAvB,CAAV;AACA2B,QAAIqC,YAAJ,CAAiB,KAAjB,EAAwB,KAAK5E,YAA7B;;AAEA;AACAqE,SAAKtC,OAAOuC,UAAP,CAAkBC,WAAlB,CAA8BA,WAAnC;AACAF,OAAGtD,WAAH,CAAewB,GAAf;AACA,IAvBD;;AAyBA;;;;;AAKA7C,eAAYG,SAAZ,CAAsB4D,WAAtB,GAAoC,UAAS1B,MAAT,EAAiB8C,GAAjB,EACpC;AACC,QAAIA,IAAI7D,GAAJ,IAAW,IAAf,EACA;AACC6D,SAAI7D,GAAJ,CAAQC,KAAR,CAAc6D,IAAd,GAAsB/C,OAAOf,GAAP,CAAW+D,UAAX,GACrBF,IAAIE,UADiB,GACNF,IAAIG,WADE,GACY,CADb,GACkB,IADvC;AAEAH,SAAI7D,GAAJ,CAAQC,KAAR,CAAcgE,GAAd,GAAqBlD,OAAOf,GAAP,CAAWkE,SAAX,GAAqBL,IAAIK,SAA1B,GAAuC,IAA3D;AACAvE,cAASwE,IAAT,CAAcpE,WAAd,CAA0B8D,IAAI7D,GAA9B;;AAEA;AACA,SAAI8D,OAAOM,SAASP,IAAI7D,GAAJ,CAAQ+D,UAAjB,CAAX;AACA,SAAIM,QAAQD,SAASP,IAAI7D,GAAJ,CAAQgE,WAAjB,CAAZ;AACA,SAAIM,SAAS5C,QAAQ6C,uBAAR,CAAgC5E,QAAhC,CAAb;;AAEA,SAAI6E,IAAI7E,SAASwE,IAAjB;AACA,SAAIM,IAAI9E,SAAS+E,eAAjB;;AAEA,SAAIC,QAAQL,OAAOM,CAAP,IAAYJ,EAAEK,WAAF,IAAiBJ,EAAEI,WAA/B,CAAZ;;AAEA,SAAIf,OAAOO,KAAP,GAAeM,KAAnB,EACA;AACCd,UAAI7D,GAAJ,CAAQC,KAAR,CAAc6D,IAAd,GAAqBgB,KAAKC,GAAL,CAAS,CAAT,EAAahE,OAAOf,GAAP,CAAW+D,UAAX,GAAwBM,KAAxB,IAAkCpF,SAAS+F,KAAV,GAAmB,CAAnB,GAAuB,CAAC,CAAzD,CAAb,IAA6E,IAAlG;AACA;;AAEDtD,aAAQuD,GAAR,CAAYpB,IAAI7D,GAAhB;AACA;AACD,IA1BD;;AA4BA;;;;;;;;;;;AAWAtB,eAAYG,SAAZ,CAAsBuC,YAAtB,GAAqC,UAASL,MAAT,EAAiBmE,KAAjB,EACrC;AACCnE,aAASA,UAAU,IAAnB;;AAEA,QAAI,KAAKvB,eAAL,IAAwB,CAAC0F,KAA7B,EACA;AACCnE,YAAOG,gBAAP,GAA0B,IAA1B;AACA,KAHD,MAIK,IAAIH,OAAOjB,KAAP,IAAgB,IAApB,EACL;AACCiB,YAAOG,gBAAP,GAA0B,KAA1B;AACA,SAAIG,KAAK1B,SAASC,aAAT,CAAuB,IAAvB,CAAT;;AAEA,SAAI0B,OAAO3B,SAASC,aAAT,CAAuB,IAAvB,CAAX;AACA0B,UAAKzB,SAAL,GAAiB,iBAAjB;AACAyB,UAAKrB,KAAL,CAAWkF,OAAX,GAAqB,WAArB;;AAEA9D,QAAGtB,WAAH,CAAeuB,IAAf;;AAEA,SAAIG,OAAO9B,SAASC,aAAT,CAAuB,IAAvB,CAAX;AACA6B,UAAKxB,KAAL,CAAWkF,OAAX,GAAqB,WAArB;AACA1D,UAAKmC,YAAL,CAAkB,SAAlB,EAA6B,GAA7B;;AAEA,SAAIwB,KAAKzF,SAASC,aAAT,CAAuB,IAAvB,CAAT;AACAwF,QAAGxB,YAAH,CAAgB,MAAhB,EAAwB,GAAxB;AACAnC,UAAK1B,WAAL,CAAiBqF,EAAjB;;AAEA/D,QAAGtB,WAAH,CAAe0B,IAAf;;AAEAV,YAAOjB,KAAP,CAAaC,WAAb,CAAyBsB,EAAzB;AACA;AACD,IA/BD;;AAiCA;;;;;;;;;;;;;;AAcA3C,eAAYG,SAAZ,CAAsBwG,KAAtB,GAA8B,UAAST,CAAT,EAAYU,CAAZ,EAAeC,IAAf,EAAqBnD,GAArB,EAC9B;AACC,QAAI,KAAKpC,GAAL,IAAY,IAAZ,IAAoB,KAAKF,KAAL,IAAc,IAAlC,IAA0C,KAAKnB,aAAL,IAAsB,IAApE,EACA;AACC,UAAKqB,GAAL,CAASC,KAAT,CAAe6D,IAAf,GAAsBc,IAAI,IAA1B;AACA,UAAK5E,GAAL,CAASC,KAAT,CAAegE,GAAf,GAAqBqB,IAAI,IAAzB;;AAEA;AACA,YAAO,KAAKxF,KAAL,CAAWwD,UAAX,IAAyB,IAAhC,EACA;AACCnD,cAAQqF,OAAR,CAAgB,KAAK1F,KAAL,CAAWwD,UAA3B;AACA,WAAKxD,KAAL,CAAW2F,WAAX,CAAuB,KAAK3F,KAAL,CAAWwD,UAAlC;AACA;;AAED,UAAKhE,SAAL,GAAiB,CAAjB;AACA,UAAKX,aAAL,CAAmB,IAAnB,EAAyB4G,IAAzB,EAA+BnD,GAA/B;;AAEA,SAAI,KAAK9C,SAAL,GAAiB,CAArB,EACA;AACC,WAAKoG,QAAL;AACA,WAAKC,SAAL,CAAe,IAAIC,aAAJ,CAAkBzF,QAAQ0F,IAA1B,CAAf;AACA;AACD;AACD,IAvBD;;AAyBA;;;;;AAKAnH,eAAYG,SAAZ,CAAsBiH,aAAtB,GAAsC,YACtC;AACC,WAAO,KAAK9F,GAAL,IAAY,IAAZ,IAAoB,KAAKA,GAAL,CAASuC,UAAT,IAAuB5C,SAASwE,IAA3D;AACA,IAHD;;AAKA;;;;;AAKAzF,eAAYG,SAAZ,CAAsB6G,QAAtB,GAAiC,YACjC;AACC;AACA,QAAI/F,SAASgD,YAAT,IAAyB,CAA7B,EACA;AACC,UAAK3C,GAAL,CAASC,KAAT,CAAe8F,MAAf,GAAwB,MAAxB;AACA;;AAED;AACApG,aAASwE,IAAT,CAAcpE,WAAd,CAA0B,KAAKC,GAA/B;AACA0B,YAAQuD,GAAR,CAAY,KAAKjF,GAAjB;AACA,IAXD;;AAaA;;;;;AAKAtB,eAAYG,SAAZ,CAAsBkE,QAAtB,GAAiC,YACjC;AACC,QAAI,KAAK/C,GAAL,IAAY,IAAhB,EACA;AACC,SAAI,KAAKA,GAAL,CAASuC,UAAT,IAAuB,IAA3B,EACA;AACC,WAAKvC,GAAL,CAASuC,UAAT,CAAoBkD,WAApB,CAAgC,KAAKzF,GAArC;AACA;;AAED,UAAKwC,WAAL,CAAiB,IAAjB;AACA,UAAKrB,aAAL,GAAqB,KAArB;AACA,UAAKwE,SAAL,CAAe,IAAIC,aAAJ,CAAkBzF,QAAQ6F,IAA1B,CAAf;AACA;AACD,IAbD;;AAeA;;;;;;;;;AASAtH,eAAYG,SAAZ,CAAsB2D,WAAtB,GAAoC,UAASzB,MAAT,EACpC;AACC,QAAIA,OAAOuB,SAAP,IAAoB,IAAxB,EACA;AACC,UAAKE,WAAL,CAAiBzB,OAAOuB,SAAxB;;AAEA,SAAIvB,OAAOuB,SAAP,CAAiBtC,GAAjB,CAAqBuC,UAArB,IAAmC,IAAvC,EACA;AACCxB,aAAOuB,SAAP,CAAiBtC,GAAjB,CAAqBuC,UAArB,CAAgCkD,WAAhC,CAA4C1E,OAAOuB,SAAP,CAAiBtC,GAA7D;AACA;;AAEDe,YAAOuB,SAAP,GAAmB,IAAnB;AACA;AACD,IAbD;;AAeA;;;;;AAKA5D,eAAYG,SAAZ,CAAsBoH,OAAtB,GAAgC,YAChC;AACC,QAAI,KAAKjG,GAAL,IAAY,IAAhB,EACA;AACCG,aAAQqF,OAAR,CAAgB,KAAKxF,GAArB;;AAEA,SAAI,KAAKA,GAAL,CAASuC,UAAT,IAAuB,IAA3B,EACA;AACC,WAAKvC,GAAL,CAASuC,UAAT,CAAoBkD,WAApB,CAAgC,KAAKzF,GAArC;AACA;;AAED,UAAKA,GAAL,GAAW,IAAX;AACA;AACD,IAbD;;AAeAkG,cAAWxH,WAAX,GAAyB,OAAOA,WAAP,KAAuB,WAAvB,GAAqCA,WAArC,GAAmDyH,SAA5E","file":"mxPopupMenu.js","sourcesContent":["/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxPopupMenu\n * \n * Basic popup menu. To add a vertical scrollbar to a given submenu, the\n * following code can be used.\n * \n * (code)\n * var mxPopupMenuShowMenu = mxPopupMenu.prototype.showMenu;\n * mxPopupMenu.prototype.showMenu = function()\n * {\n *   mxPopupMenuShowMenu.apply(this, arguments);\n *   \n *   this.div.style.overflowY = 'auto';\n *   this.div.style.overflowX = 'hidden';\n *   this.div.style.maxHeight = '160px';\n * };\n * (end)\n * \n * Constructor: mxPopupMenu\n * \n * Constructs a popupmenu.\n * \n * Event: mxEvent.SHOW\n *\n * Fires after the menu has been shown in <popup>.\n */\nfunction mxPopupMenu(factoryMethod)\n{\n\tthis.factoryMethod = factoryMethod;\n\t\n\tif (factoryMethod != null)\n\t{\n\t\tthis.init();\n\t}\n};\n\n/**\n * Extends mxEventSource.\n */\nmxPopupMenu.prototype = new mxEventSource();\nmxPopupMenu.prototype.constructor = mxPopupMenu;\n\n/**\n * Variable: submenuImage\n * \n * URL of the image to be used for the submenu icon.\n */\nmxPopupMenu.prototype.submenuImage = mxClient.imageBasePath + '/submenu.gif';\n\n/**\n * Variable: zIndex\n * \n * Specifies the zIndex for the popupmenu and its shadow. Default is 1006.\n */\nmxPopupMenu.prototype.zIndex = 10006;\n\n/**\n * Variable: factoryMethod\n * \n * Function that is used to create the popup menu. The function takes the\n * current panning handler, the <mxCell> under the mouse and the mouse\n * event that triggered the call as arguments.\n */\nmxPopupMenu.prototype.factoryMethod = null;\n\n/**\n * Variable: useLeftButtonForPopup\n * \n * Specifies if popupmenus should be activated by clicking the left mouse\n * button. Default is false.\n */\nmxPopupMenu.prototype.useLeftButtonForPopup = false;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxPopupMenu.prototype.enabled = true;\n\n/**\n * Variable: itemCount\n * \n * Contains the number of times <addItem> has been called for a new menu.\n */\nmxPopupMenu.prototype.itemCount = 0;\n\n/**\n * Variable: autoExpand\n * \n * Specifies if submenus should be expanded on mouseover. Default is false.\n */\nmxPopupMenu.prototype.autoExpand = false;\n\n/**\n * Variable: smartSeparators\n * \n * Specifies if separators should only be added if a menu item follows them.\n * Default is false.\n */\nmxPopupMenu.prototype.smartSeparators = false;\n\n/**\n * Variable: labels\n * \n * Specifies if any labels should be visible. Default is true.\n */\nmxPopupMenu.prototype.labels = true;\n\n/**\n * Function: init\n * \n * Initializes the shapes required for this vertex handler.\n */\nmxPopupMenu.prototype.init = function()\n{\n\t// Adds the inner table\n\tthis.table = document.createElement('table');\n\tthis.table.className = 'mxPopupMenu';\n\t\n\tthis.tbody = document.createElement('tbody');\n\tthis.table.appendChild(this.tbody);\n\n\t// Adds the outer div\n\tthis.div = document.createElement('div');\n\tthis.div.className = 'mxPopupMenu';\n\tthis.div.style.display = 'inline';\n\tthis.div.style.zIndex = this.zIndex;\n\tthis.div.appendChild(this.table);\n\n\t// Disables the context menu on the outer div\n\tmxEvent.disableContextMenu(this.div);\n};\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxPopupMenu.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\t\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n */\nmxPopupMenu.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: isPopupTrigger\n * \n * Returns true if the given event is a popupmenu trigger for the optional\n * given cell.\n * \n * Parameters:\n * \n * me - <mxMouseEvent> that represents the mouse event.\n */\nmxPopupMenu.prototype.isPopupTrigger = function(me)\n{\n\treturn me.isPopupTrigger() || (this.useLeftButtonForPopup && mxEvent.isLeftMouseButton(me.getEvent()));\n};\n\n/**\n * Function: addItem\n * \n * Adds the given item to the given parent item. If no parent item is specified\n * then the item is added to the top-level menu. The return value may be used\n * as the parent argument, ie. as a submenu item. The return value is the table\n * row that represents the item.\n * \n * Paramters:\n * \n * title - String that represents the title of the menu item.\n * image - Optional URL for the image icon.\n * funct - Function associated that takes a mouseup or touchend event.\n * parent - Optional item returned by <addItem>.\n * iconCls - Optional string that represents the CSS class for the image icon.\n * IconsCls is ignored if image is given.\n * enabled - Optional boolean indicating if the item is enabled. Default is true.\n * active - Optional boolean indicating if the menu should implement any event handling.\n * Default is true.\n */\nmxPopupMenu.prototype.addItem = function(title, image, funct, parent, iconCls, enabled, active)\n{\n\tparent = parent || this;\n\tthis.itemCount++;\n\t\n\t// Smart separators only added if element contains items\n\tif (parent.willAddSeparator)\n\t{\n\t\tif (parent.containsItems)\n\t\t{\n\t\t\tthis.addSeparator(parent, true);\n\t\t}\n\n\t\tparent.willAddSeparator = false;\n\t}\n\n\tparent.containsItems = true;\n\tvar tr = document.createElement('tr');\n\ttr.className = 'mxPopupMenuItem';\n\tvar col1 = document.createElement('td');\n\tcol1.className = 'mxPopupMenuIcon';\n\n\t// Adds the given image into the first column\n\tif (image != null)\n\t{\n\t\tvar img = document.createElement('img');\n\t\timg.src = image;\n\t\tcol1.appendChild(img);\n\t}\n\telse if (iconCls != null)\n\t{\n\t\tvar div = document.createElement('div');\n\t\tdiv.className = iconCls;\n\t\tcol1.appendChild(div);\n\t}\n\t\n\ttr.appendChild(col1);\n\t\n\tif (this.labels)\n\t{\n\t\tvar col2 = document.createElement('td');\n\t\tcol2.className = 'mxPopupMenuItem' +\n\t\t\t((enabled != null && !enabled) ? ' mxDisabled' : '');\n\t\t\n\t\tmxUtils.write(col2, title);\n\t\tcol2.align = 'left';\n\t\ttr.appendChild(col2);\n\t\n\t\tvar col3 = document.createElement('td');\n\t\tcol3.className = 'mxPopupMenuItem' +\n\t\t\t((enabled != null && !enabled) ? ' mxDisabled' : '');\n\t\tcol3.style.paddingRight = '6px';\n\t\tcol3.style.textAlign = 'right';\n\t\t\n\t\ttr.appendChild(col3);\n\t\t\n\t\tif (parent.div == null)\n\t\t{\n\t\t\tthis.createSubmenu(parent);\n\t\t}\n\t}\n\t\n\tparent.tbody.appendChild(tr);\n\n\tif (active != false && enabled != false)\n\t{\n\t\tvar currentSelection = null;\n\t\t\n\t\tmxEvent.addGestureListeners(tr,\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tthis.eventReceiver = tr;\n\t\t\t\t\n\t\t\t\tif (parent.activeRow != tr && parent.activeRow != parent)\n\t\t\t\t{\n\t\t\t\t\tif (parent.activeRow != null && parent.activeRow.div.parentNode != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.hideSubmenu(parent);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (tr.div != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showSubmenu(parent, tr);\n\t\t\t\t\t\tparent.activeRow = tr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Workaround for lost current selection in page because of focus in IE\n\t\t\t\tif (mxClient.IS_QUIRKS || document.documentMode == 8)\n\t\t\t\t{\n\t\t\t\t\tcurrentSelection = document.selection.createRange();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t}),\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\tif (parent.activeRow != tr && parent.activeRow != parent)\n\t\t\t\t{\n\t\t\t\t\tif (parent.activeRow != null && parent.activeRow.div.parentNode != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.hideSubmenu(parent);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (this.autoExpand && tr.div != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showSubmenu(parent, tr);\n\t\t\t\t\t\tparent.activeRow = tr;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\n\t\t\t\t// Sets hover style because TR in IE doesn't have hover\n\t\t\t\ttr.className = 'mxPopupMenuItemHover';\n\t\t\t}),\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\t// EventReceiver avoids clicks on a submenu item\n\t\t\t\t// which has just been shown in the mousedown\n\t\t\t\tif (this.eventReceiver == tr)\n\t\t\t\t{\n\t\t\t\t\tif (parent.activeRow != tr)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.hideMenu();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Workaround for lost current selection in page because of focus in IE\n\t\t\t\t\tif (currentSelection != null)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Workaround for \"unspecified error\" in IE8 standards\n\t\t\t\t\t\ttry\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcurrentSelection.select();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcatch (e)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// ignore\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcurrentSelection = null;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (funct != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tfunct(evt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.eventReceiver = null;\n\t\t\t\tmxEvent.consume(evt);\n\t\t\t})\n\t\t);\n\t\n\t\t// Resets hover style because TR in IE doesn't have hover\n\t\tmxEvent.addListener(tr, 'mouseout',\n\t\t\tmxUtils.bind(this, function(evt)\n\t\t\t{\n\t\t\t\ttr.className = 'mxPopupMenuItem';\n\t\t\t})\n\t\t);\n\t}\n\t\n\treturn tr;\n};\n\n/**\n * Adds a checkmark to the given menuitem.\n */\nmxPopupMenu.prototype.addCheckmark = function(item, img)\n{\n\tvar td = item.firstChild.nextSibling;\n\ttd.style.backgroundImage = 'url(\\'' + img + '\\')';\n\ttd.style.backgroundRepeat = 'no-repeat';\n\ttd.style.backgroundPosition = '2px 50%';\n};\n\n/**\n * Function: createSubmenu\n * \n * Creates the nodes required to add submenu items inside the given parent\n * item. This is called in <addItem> if a parent item is used for the first\n * time. This adds various DOM nodes and a <submenuImage> to the parent.\n * \n * Parameters:\n * \n * parent - An item returned by <addItem>.\n */\nmxPopupMenu.prototype.createSubmenu = function(parent)\n{\n\tparent.table = document.createElement('table');\n\tparent.table.className = 'mxPopupMenu';\n\n\tparent.tbody = document.createElement('tbody');\n\tparent.table.appendChild(parent.tbody);\n\n\tparent.div = document.createElement('div');\n\tparent.div.className = 'mxPopupMenu';\n\n\tparent.div.style.position = 'absolute';\n\tparent.div.style.display = 'inline';\n\tparent.div.style.zIndex = this.zIndex;\n\t\n\tparent.div.appendChild(parent.table);\n\t\n\tvar img = document.createElement('img');\n\timg.setAttribute('src', this.submenuImage);\n\t\n\t// Last column of the submenu item in the parent menu\n\ttd = parent.firstChild.nextSibling.nextSibling;\n\ttd.appendChild(img);\n};\n\n/**\n * Function: showSubmenu\n * \n * Shows the submenu inside the given parent row.\n */\nmxPopupMenu.prototype.showSubmenu = function(parent, row)\n{\n\tif (row.div != null)\n\t{\n\t\trow.div.style.left = (parent.div.offsetLeft +\n\t\t\trow.offsetLeft+row.offsetWidth - 1) + 'px';\n\t\trow.div.style.top = (parent.div.offsetTop+row.offsetTop) + 'px';\n\t\tdocument.body.appendChild(row.div);\n\t\t\n\t\t// Moves the submenu to the left side if there is no space\n\t\tvar left = parseInt(row.div.offsetLeft);\n\t\tvar width = parseInt(row.div.offsetWidth);\n\t\tvar offset = mxUtils.getDocumentScrollOrigin(document);\n\t\t\n\t\tvar b = document.body;\n\t\tvar d = document.documentElement;\n\t\t\n\t\tvar right = offset.x + (b.clientWidth || d.clientWidth);\n\t\t\n\t\tif (left + width > right)\n\t\t{\n\t\t\trow.div.style.left = Math.max(0, (parent.div.offsetLeft - width + ((mxClient.IS_IE) ? 6 : -6))) + 'px';\n\t\t}\n\t\t\n\t\tmxUtils.fit(row.div);\n\t}\n};\n\n/**\n * Function: addSeparator\n * \n * Adds a horizontal separator in the given parent item or the top-level menu\n * if no parent is specified.\n * \n * Parameters:\n * \n * parent - Optional item returned by <addItem>.\n * force - Optional boolean to ignore <smartSeparators>. Default is false.\n */\nmxPopupMenu.prototype.addSeparator = function(parent, force)\n{\n\tparent = parent || this;\n\t\n\tif (this.smartSeparators && !force)\n\t{\n\t\tparent.willAddSeparator = true;\n\t}\n\telse if (parent.tbody != null)\n\t{\n\t\tparent.willAddSeparator = false;\n\t\tvar tr = document.createElement('tr');\n\t\t\n\t\tvar col1 = document.createElement('td');\n\t\tcol1.className = 'mxPopupMenuIcon';\n\t\tcol1.style.padding = '0 0 0 0px';\n\t\t\n\t\ttr.appendChild(col1);\n\t\t\n\t\tvar col2 = document.createElement('td');\n\t\tcol2.style.padding = '0 0 0 0px';\n\t\tcol2.setAttribute('colSpan', '2');\n\t\n\t\tvar hr = document.createElement('hr');\n\t\thr.setAttribute('size', '1');\n\t\tcol2.appendChild(hr);\n\t\t\n\t\ttr.appendChild(col2);\n\t\t\n\t\tparent.tbody.appendChild(tr);\n\t}\n};\n\n/**\n * Function: popup\n * \n * Shows the popup menu for the given event and cell.\n * \n * Example:\n * \n * (code)\n * graph.panningHandler.popup = function(x, y, cell, evt)\n * {\n *   mxUtils.alert('Hello, World!');\n * }\n * (end)\n */\nmxPopupMenu.prototype.popup = function(x, y, cell, evt)\n{\n\tif (this.div != null && this.tbody != null && this.factoryMethod != null)\n\t{\n\t\tthis.div.style.left = x + 'px';\n\t\tthis.div.style.top = y + 'px';\n\t\t\n\t\t// Removes all child nodes from the existing menu\n\t\twhile (this.tbody.firstChild != null)\n\t\t{\n\t\t\tmxEvent.release(this.tbody.firstChild);\n\t\t\tthis.tbody.removeChild(this.tbody.firstChild);\n\t\t}\n\t\t\n\t\tthis.itemCount = 0;\n\t\tthis.factoryMethod(this, cell, evt);\n\t\t\n\t\tif (this.itemCount > 0)\n\t\t{\n\t\t\tthis.showMenu();\n\t\t\tthis.fireEvent(new mxEventObject(mxEvent.SHOW));\n\t\t}\n\t}\n};\n\n/**\n * Function: isMenuShowing\n * \n * Returns true if the menu is showing.\n */\nmxPopupMenu.prototype.isMenuShowing = function()\n{\n\treturn this.div != null && this.div.parentNode == document.body;\n};\n\n/**\n * Function: showMenu\n * \n * Shows the menu.\n */\nmxPopupMenu.prototype.showMenu = function()\n{\n\t// Disables filter-based shadow in IE9 standards mode\n\tif (document.documentMode >= 9)\n\t{\n\t\tthis.div.style.filter = 'none';\n\t}\n\t\n\t// Fits the div inside the viewport\n\tdocument.body.appendChild(this.div);\n\tmxUtils.fit(this.div);\n};\n\n/**\n * Function: hideMenu\n * \n * Removes the menu and all submenus.\n */\nmxPopupMenu.prototype.hideMenu = function()\n{\n\tif (this.div != null)\n\t{\n\t\tif (this.div.parentNode != null)\n\t\t{\n\t\t\tthis.div.parentNode.removeChild(this.div);\n\t\t}\n\t\t\n\t\tthis.hideSubmenu(this);\n\t\tthis.containsItems = false;\n\t\tthis.fireEvent(new mxEventObject(mxEvent.HIDE));\n\t}\n};\n\n/**\n * Function: hideSubmenu\n * \n * Removes all submenus inside the given parent.\n * \n * Parameters:\n * \n * parent - An item returned by <addItem>.\n */\nmxPopupMenu.prototype.hideSubmenu = function(parent)\n{\n\tif (parent.activeRow != null)\n\t{\n\t\tthis.hideSubmenu(parent.activeRow);\n\t\t\n\t\tif (parent.activeRow.div.parentNode != null)\n\t\t{\n\t\t\tparent.activeRow.div.parentNode.removeChild(parent.activeRow.div);\n\t\t}\n\t\t\n\t\tparent.activeRow = null;\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxPopupMenu.prototype.destroy = function()\n{\n\tif (this.div != null)\n\t{\n\t\tmxEvent.release(this.div);\n\t\t\n\t\tif (this.div.parentNode != null)\n\t\t{\n\t\t\tthis.div.parentNode.removeChild(this.div);\n\t\t}\n\t\t\n\t\tthis.div = null;\n\t}\n};\n\n__mxOutput.mxPopupMenu = typeof mxPopupMenu !== 'undefined' ? mxPopupMenu : undefined;\n"]}