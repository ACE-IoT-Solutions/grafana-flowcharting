{"version":3,"sources":["../../../../../../src/mxgraph/javascript/dist/js/util/mxPanningManager.js"],"names":["mxPanningManager","graph","thread","active","tdx","tdy","t0x","t0y","dx","dy","scrollbars","scrollLeft","scrollTop","mouseListener","mouseDown","sender","me","mouseMove","mouseUp","mxUtils","bind","stop","addMouseListener","mouseUpListener","mxEvent","addListener","document","createThread","hasScrollbars","container","window","setInterval","left","Math","ceil","top","panGraph","panDx","panDy","fireEvent","mxEventObject","PAN","getDx","getDy","delay","isActive","round","start","view","translate","x","y","panTo","w","h","c","clientWidth","abs","border","handleMouseOut","max","min","clientHeight","damper","clearInterval","px","py","setTranslate","scale","destroy","removeMouseListener","removeListener","prototype","__mxOutput","undefined"],"mappings":"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","file":"mxPanningManager.js","sourcesContent":["/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxPanningManager\n *\n * Implements a handler for panning.\n */\nfunction mxPanningManager(graph)\n{\n\tthis.thread = null;\n\tthis.active = false;\n\tthis.tdx = 0;\n\tthis.tdy = 0;\n\tthis.t0x = 0;\n\tthis.t0y = 0;\n\tthis.dx = 0;\n\tthis.dy = 0;\n\tthis.scrollbars = false;\n\tthis.scrollLeft = 0;\n\tthis.scrollTop = 0;\n\t\n\tthis.mouseListener =\n\t{\n\t    mouseDown: function(sender, me) { },\n\t    mouseMove: function(sender, me) { },\n\t    mouseUp: mxUtils.bind(this, function(sender, me)\n\t    {\n\t    \tif (this.active)\n\t    \t{\n\t    \t\tthis.stop();\n\t    \t}\n\t    })\n\t};\n\t\n\tgraph.addMouseListener(this.mouseListener);\n\t\n\tthis.mouseUpListener = mxUtils.bind(this, function()\n\t{\n\t    \tif (this.active)\n\t    \t{\n\t    \t\tthis.stop();\n\t    \t}\n\t});\n\t\n\t// Stops scrolling on every mouseup anywhere in the document\n\tmxEvent.addListener(document, 'mouseup', this.mouseUpListener);\n\t\n\tvar createThread = mxUtils.bind(this, function()\n\t{\n\t    \tthis.scrollbars = mxUtils.hasScrollbars(graph.container);\n\t    \tthis.scrollLeft = graph.container.scrollLeft;\n\t    \tthis.scrollTop = graph.container.scrollTop;\n\t\n\t    \treturn window.setInterval(mxUtils.bind(this, function()\n\t\t{\n\t\t\tthis.tdx -= this.dx;\n\t\t\tthis.tdy -= this.dy;\n\n\t\t\tif (this.scrollbars)\n\t\t\t{\n\t\t\t\tvar left = -graph.container.scrollLeft - Math.ceil(this.dx);\n\t\t\t\tvar top = -graph.container.scrollTop - Math.ceil(this.dy);\n\t\t\t\tgraph.panGraph(left, top);\n\t\t\t\tgraph.panDx = this.scrollLeft - graph.container.scrollLeft;\n\t\t\t\tgraph.panDy = this.scrollTop - graph.container.scrollTop;\n\t\t\t\tgraph.fireEvent(new mxEventObject(mxEvent.PAN));\n\t\t\t\t// TODO: Implement graph.autoExtend\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgraph.panGraph(this.getDx(), this.getDy());\n\t\t\t}\n\t\t}), this.delay);\n\t});\n\t\n\tthis.isActive = function()\n\t{\n\t\treturn active;\n\t};\n\t\n\tthis.getDx = function()\n\t{\n\t\treturn Math.round(this.tdx);\n\t};\n\t\n\tthis.getDy = function()\n\t{\n\t\treturn Math.round(this.tdy);\n\t};\n\t\n\tthis.start = function()\n\t{\n\t\tthis.t0x = graph.view.translate.x;\n\t\tthis.t0y = graph.view.translate.y;\n\t\tthis.active = true;\n\t};\n\t\n\tthis.panTo = function(x, y, w, h)\n\t{\n\t\tif (!this.active)\n\t\t{\n\t\t\tthis.start();\n\t\t}\n\t\t\n    \tthis.scrollLeft = graph.container.scrollLeft;\n    \tthis.scrollTop = graph.container.scrollTop;\n\t\t\n\t\tw = (w != null) ? w : 0;\n\t\th = (h != null) ? h : 0;\n\t\t\n\t\tvar c = graph.container;\n\t\tthis.dx = x + w - c.scrollLeft - c.clientWidth;\n\t\t\n\t\tif (this.dx < 0 && Math.abs(this.dx) < this.border)\n\t\t{\n\t\t\tthis.dx = this.border + this.dx;\n\t\t}\n\t\telse if (this.handleMouseOut)\n\t\t{\n\t\t\tthis.dx = Math.max(this.dx, 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.dx = 0;\n\t\t}\n\t\t\n\t\tif (this.dx == 0)\n\t\t{\n\t\t\tthis.dx = x - c.scrollLeft;\n\t\t\t\n\t\t\tif (this.dx > 0 && this.dx < this.border)\n\t\t\t{\n\t\t\t\tthis.dx = this.dx - this.border;\n\t\t\t}\n\t\t\telse if (this.handleMouseOut)\n\t\t\t{\n\t\t\t\tthis.dx = Math.min(0, this.dx);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.dx = 0;\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.dy = y + h - c.scrollTop - c.clientHeight;\n\n\t\tif (this.dy < 0 && Math.abs(this.dy) < this.border)\n\t\t{\n\t\t\tthis.dy = this.border + this.dy;\n\t\t}\n\t\telse if (this.handleMouseOut)\n\t\t{\n\t\t\tthis.dy = Math.max(this.dy, 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.dy = 0;\n\t\t}\n\t\t\n\t\tif (this.dy == 0)\n\t\t{\n\t\t\tthis.dy = y - c.scrollTop;\n\t\t\t\n\t\t\tif (this.dy > 0 && this.dy < this.border)\n\t\t\t{\n\t\t\t\tthis.dy = this.dy - this.border;\n\t\t\t}\n\t\t\telse if (this.handleMouseOut)\n\t\t\t{\n\t\t\t\tthis.dy = Math.min(0, this.dy);\n\t\t\t} \n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.dy = 0;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (this.dx != 0 || this.dy != 0)\n\t\t{\n\t\t\tthis.dx *= this.damper;\n\t\t\tthis.dy *= this.damper;\n\t\t\t\n\t\t\tif (this.thread == null)\n\t\t\t{\n\t\t\t\tthis.thread = createThread();\n\t\t\t}\n\t\t}\n\t\telse if (this.thread != null)\n\t\t{\n\t\t\twindow.clearInterval(this.thread);\n\t\t\tthis.thread = null;\n\t\t}\n\t};\n\t\n\tthis.stop = function()\n\t{\n\t\tif (this.active)\n\t\t{\n\t\t\tthis.active = false;\n\t\t\n\t\t\tif (this.thread != null)\n\t    \t{\n\t\t\t\twindow.clearInterval(this.thread);\n\t\t\t\tthis.thread = null;\n\t    \t}\n\t\t\t\n\t\t\tthis.tdx = 0;\n\t\t\tthis.tdy = 0;\n\t\t\t\n\t\t\tif (!this.scrollbars)\n\t\t\t{\n\t\t\t\tvar px = graph.panDx;\n\t\t\t\tvar py = graph.panDy;\n\t\t    \t\n\t\t    \tif (px != 0 || py != 0)\n\t\t    \t{\n\t\t    \t\tgraph.panGraph(0, 0);\n\t\t\t    \tgraph.view.setTranslate(this.t0x + px / graph.view.scale, this.t0y + py / graph.view.scale);\n\t\t    \t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgraph.panDx = 0;\n\t\t\t\tgraph.panDy = 0;\n\t\t\t\tgraph.fireEvent(new mxEventObject(mxEvent.PAN));\n\t\t\t}\n\t\t}\n\t};\n\t\n\tthis.destroy = function()\n\t{\n\t\tgraph.removeMouseListener(this.mouseListener);\n\t\tmxEvent.removeListener(document, 'mouseup', this.mouseUpListener);\n\t};\n};\n\n/**\n * Variable: damper\n * \n * Damper value for the panning. Default is 1/6.\n */\nmxPanningManager.prototype.damper = 1/6;\n\n/**\n * Variable: delay\n * \n * Delay in milliseconds for the panning. Default is 10.\n */\nmxPanningManager.prototype.delay = 10;\n\n/**\n * Variable: handleMouseOut\n * \n * Specifies if mouse events outside of the component should be handled. Default is true. \n */\nmxPanningManager.prototype.handleMouseOut = true;\n\n/**\n * Variable: border\n * \n * Border to handle automatic panning inside the component. Default is 0 (disabled).\n */\nmxPanningManager.prototype.border = 0;\n\n__mxOutput.mxPanningManager = typeof mxPanningManager !== 'undefined' ? mxPanningManager : undefined;\n"]}