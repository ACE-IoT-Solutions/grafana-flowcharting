{"version":3,"sources":["../../../../../../src/mxgraph/javascript/dist/js/handler/mxRubberband.js"],"names":["mxRubberband","graph","addMouseListener","forceRubberbandHandler","mxUtils","bind","sender","evt","evtName","getProperty","me","mxEvent","MOUSE_DOWN","isForceRubberbandEvent","offset","getOffset","container","origin","getScrollOrigin","x","y","start","getX","getY","consume","addListener","FIRE_MOUSE_EVENT","panHandler","repaint","PAN","gestureHandler","eo","first","reset","GESTURE","mxClient","IS_IE","window","destroy","prototype","defaultOpacity","enabled","div","sharedDiv","currentX","currentY","fadeOut","isEnabled","setEnabled","isAltDown","getEvent","mouseDown","isConsumed","getState","isMultiTouchEvent","mxPoint","createMouseEvent","mxMouseEvent","pt","convertPoint","graphX","graphY","dragHandler","mouseMove","dropHandler","mouseUp","IS_FF","addGestureListeners","document","dx","dy","tol","tolerance","Math","abs","createShape","clearSelection","update","createElement","className","setOpacity","appendChild","result","IS_SVG","documentMode","isActive","style","display","active","execute","rect","mxRectangle","width","height","selectRegion","temp","setPrefixedStyle","pointerEvents","opacity","setTimeout","parentNode","removeChild","removeGestureListeners","panDx","panDy","min","max","IS_VML","left","top","destroyed","removeMouseListener","removeListener","__mxOutput","undefined"],"mappings":"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","file":"mxRubberband.js","sourcesContent":["/**\n * Copyright (c) 2006-2016, JGraph Ltd\n * Copyright (c) 2006-2016, Gaudenz Alder\n */\n/**\n * Class: mxRubberband\n * \n * Event handler that selects rectangular regions. This is not built-into\n * <mxGraph>. To enable rubberband selection in a graph, use the following code.\n * \n * Example:\n * \n * (code)\n * var rubberband = new mxRubberband(graph);\n * (end)\n * \n * Constructor: mxRubberband\n * \n * Constructs an event handler that selects rectangular regions in the graph\n * using rubberband selection.\n */\nfunction mxRubberband(graph)\n{\n\tif (graph != null)\n\t{\n\t\tthis.graph = graph;\n\t\tthis.graph.addMouseListener(this);\n\n\t\t// Handles force rubberband event\n\t\tthis.forceRubberbandHandler = mxUtils.bind(this, function(sender, evt)\n\t\t{\n\t\t\tvar evtName = evt.getProperty('eventName');\n\t\t\tvar me = evt.getProperty('event');\n\t\t\t\n\t\t\tif (evtName == mxEvent.MOUSE_DOWN && this.isForceRubberbandEvent(me))\n\t\t\t{\n\t\t\t\tvar offset = mxUtils.getOffset(this.graph.container);\n\t\t\t\tvar origin = mxUtils.getScrollOrigin(this.graph.container);\n\t\t\t\torigin.x -= offset.x;\n\t\t\t\torigin.y -= offset.y;\n\t\t\t\tthis.start(me.getX() + origin.x, me.getY() + origin.y);\n\t\t\t\tme.consume(false);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.graph.addListener(mxEvent.FIRE_MOUSE_EVENT, this.forceRubberbandHandler);\n\t\t\n\t\t// Repaints the marquee after autoscroll\n\t\tthis.panHandler = mxUtils.bind(this, function()\n\t\t{\n\t\t\tthis.repaint();\n\t\t});\n\t\t\n\t\tthis.graph.addListener(mxEvent.PAN, this.panHandler);\n\t\t\n\t\t// Does not show menu if any touch gestures take place after the trigger\n\t\tthis.gestureHandler = mxUtils.bind(this, function(sender, eo)\n\t\t{\n\t\t\tif (this.first != null)\n\t\t\t{\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.graph.addListener(mxEvent.GESTURE, this.gestureHandler);\n\t\t\n\t\t// Automatic deallocation of memory\n\t\tif (mxClient.IS_IE)\n\t\t{\n\t\t\tmxEvent.addListener(window, 'unload',\n\t\t\t\tmxUtils.bind(this, function()\n\t\t\t\t{\n\t\t\t\t\tthis.destroy();\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n};\n\n/**\n * Variable: defaultOpacity\n * \n * Specifies the default opacity to be used for the rubberband div. Default\n * is 20.\n */\nmxRubberband.prototype.defaultOpacity = 20;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxRubberband.prototype.enabled = true;\n\n/**\n * Variable: div\n * \n * Holds the DIV element which is currently visible.\n */\nmxRubberband.prototype.div = null;\n\n/**\n * Variable: sharedDiv\n * \n * Holds the DIV element which is used to display the rubberband.\n */\nmxRubberband.prototype.sharedDiv = null;\n\n/**\n * Variable: currentX\n * \n * Holds the value of the x argument in the last call to <update>.\n */\nmxRubberband.prototype.currentX = 0;\n\n/**\n * Variable: currentY\n * \n * Holds the value of the y argument in the last call to <update>.\n */\nmxRubberband.prototype.currentY = 0;\n\n/**\n * Variable: fadeOut\n * \n * Optional fade out effect. Default is false.\n */\nmxRubberband.prototype.fadeOut = false;\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation returns\n * <enabled>.\n */\nmxRubberband.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\t\t\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation updates\n * <enabled>.\n */\nmxRubberband.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: isForceRubberbandEvent\n * \n * Returns true if the given <mxMouseEvent> should start rubberband selection.\n * This implementation returns true if the alt key is pressed.\n */\nmxRubberband.prototype.isForceRubberbandEvent = function(me)\n{\n\treturn mxEvent.isAltDown(me.getEvent());\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event by initiating a rubberband selection. By consuming the\n * event all subsequent events of the gesture are redirected to this\n * handler.\n */\nmxRubberband.prototype.mouseDown = function(sender, me)\n{\n\tif (!me.isConsumed() && this.isEnabled() && this.graph.isEnabled() &&\n\t\tme.getState() == null && !mxEvent.isMultiTouchEvent(me.getEvent()))\n\t{\n\t\tvar offset = mxUtils.getOffset(this.graph.container);\n\t\tvar origin = mxUtils.getScrollOrigin(this.graph.container);\n\t\torigin.x -= offset.x;\n\t\torigin.y -= offset.y;\n\t\tthis.start(me.getX() + origin.x, me.getY() + origin.y);\n\n\t\t// Does not prevent the default for this event so that the\n\t\t// event processing chain is still executed even if we start\n\t\t// rubberbanding. This is required eg. in ExtJs to hide the\n\t\t// current context menu. In mouseMove we'll make sure we're\n\t\t// not selecting anything while we're rubberbanding.\n\t\tme.consume(false);\n\t}\n};\n\n/**\n * Function: start\n * \n * Sets the start point for the rubberband selection.\n */\nmxRubberband.prototype.start = function(x, y)\n{\n\tthis.first = new mxPoint(x, y);\n\n\tvar container = this.graph.container;\n\t\n\tfunction createMouseEvent(evt)\n\t{\n\t\tvar me = new mxMouseEvent(evt);\n\t\tvar pt = mxUtils.convertPoint(container, me.getX(), me.getY());\n\t\t\n\t\tme.graphX = pt.x;\n\t\tme.graphY = pt.y;\n\t\t\n\t\treturn me;\n\t};\n\n\tthis.dragHandler = mxUtils.bind(this, function(evt)\n\t{\n\t\tthis.mouseMove(this.graph, createMouseEvent(evt));\n\t});\n\n\tthis.dropHandler = mxUtils.bind(this, function(evt)\n\t{\n\t\tthis.mouseUp(this.graph, createMouseEvent(evt));\n\t});\n\n\t// Workaround for rubberband stopping if the mouse leaves the container in Firefox\n\tif (mxClient.IS_FF)\n\t{\n\t\tmxEvent.addGestureListeners(document, null, this.dragHandler, this.dropHandler);\n\t}\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by updating therubberband selection.\n */\nmxRubberband.prototype.mouseMove = function(sender, me)\n{\n\tif (!me.isConsumed() && this.first != null)\n\t{\n\t\tvar origin = mxUtils.getScrollOrigin(this.graph.container);\n\t\tvar offset = mxUtils.getOffset(this.graph.container);\n\t\torigin.x -= offset.x;\n\t\torigin.y -= offset.y;\n\t\tvar x = me.getX() + origin.x;\n\t\tvar y = me.getY() + origin.y;\n\t\tvar dx = this.first.x - x;\n\t\tvar dy = this.first.y - y;\n\t\tvar tol = this.graph.tolerance;\n\t\t\n\t\tif (this.div != null || Math.abs(dx) > tol ||  Math.abs(dy) > tol)\n\t\t{\n\t\t\tif (this.div == null)\n\t\t\t{\n\t\t\t\tthis.div = this.createShape();\n\t\t\t}\n\t\t\t\n\t\t\t// Clears selection while rubberbanding. This is required because\n\t\t\t// the event is not consumed in mouseDown.\n\t\t\tmxUtils.clearSelection();\n\t\t\t\n\t\t\tthis.update(x, y);\n\t\t\tme.consume();\n\t\t}\n\t}\n};\n\n/**\n * Function: createShape\n * \n * Creates the rubberband selection shape.\n */\nmxRubberband.prototype.createShape = function()\n{\n\tif (this.sharedDiv == null)\n\t{\n\t\tthis.sharedDiv = document.createElement('div');\n\t\tthis.sharedDiv.className = 'mxRubberband';\n\t\tmxUtils.setOpacity(this.sharedDiv, this.defaultOpacity);\n\t}\n\n\tthis.graph.container.appendChild(this.sharedDiv);\n\tvar result = this.sharedDiv;\n\t\n\tif (mxClient.IS_SVG && (!mxClient.IS_IE || document.documentMode >= 10) && this.fadeOut)\n\t{\n\t\tthis.sharedDiv = null;\n\t}\n\t\t\n\treturn result;\n};\n\n/**\n * Function: isActive\n * \n * Returns true if this handler is active.\n */\nmxRubberband.prototype.isActive = function(sender, me)\n{\n\treturn this.div != null && this.div.style.display != 'none';\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by selecting the region of the rubberband using\n * <mxGraph.selectRegion>.\n */\nmxRubberband.prototype.mouseUp = function(sender, me)\n{\n\tvar active = this.isActive();\n\tthis.reset();\n\t\n\tif (active)\n\t{\n\t\tthis.execute(me.getEvent());\n\t\tme.consume();\n\t}\n};\n\n/**\n * Function: execute\n * \n * Resets the state of this handler and selects the current region\n * for the given event.\n */\nmxRubberband.prototype.execute = function(evt)\n{\n\tvar rect = new mxRectangle(this.x, this.y, this.width, this.height);\n\tthis.graph.selectRegion(rect, evt);\n};\n\n/**\n * Function: reset\n * \n * Resets the state of the rubberband selection.\n */\nmxRubberband.prototype.reset = function()\n{\n\tif (this.div != null)\n\t{\n\t\tif (mxClient.IS_SVG && (!mxClient.IS_IE || document.documentMode >= 10) && this.fadeOut)\n\t\t{\n\t\t\tvar temp = this.div;\n\t\t\tmxUtils.setPrefixedStyle(temp.style, 'transition', 'all 0.2s linear');\n\t\t\ttemp.style.pointerEvents = 'none';\n\t\t\ttemp.style.opacity = 0;\n\t\t    \n\t\t    window.setTimeout(function()\n\t\t    \t{\n\t\t    \t\ttemp.parentNode.removeChild(temp);\n\t\t    \t}, 200);\t\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.div.parentNode.removeChild(this.div);\n\t\t}\n\t}\n\n\tmxEvent.removeGestureListeners(document, null, this.dragHandler, this.dropHandler);\n\tthis.dragHandler = null;\n\tthis.dropHandler = null;\n\t\n\tthis.currentX = 0;\n\tthis.currentY = 0;\n\tthis.first = null;\n\tthis.div = null;\n};\n\n/**\n * Function: update\n * \n * Sets <currentX> and <currentY> and calls <repaint>.\n */\nmxRubberband.prototype.update = function(x, y)\n{\n\tthis.currentX = x;\n\tthis.currentY = y;\n\t\n\tthis.repaint();\n};\n\n/**\n * Function: repaint\n * \n * Computes the bounding box and updates the style of the <div>.\n */\nmxRubberband.prototype.repaint = function()\n{\n\tif (this.div != null)\n\t{\n\t\tvar x = this.currentX - this.graph.panDx;\n\t\tvar y = this.currentY - this.graph.panDy;\n\t\t\n\t\tthis.x = Math.min(this.first.x, x);\n\t\tthis.y = Math.min(this.first.y, y);\n\t\tthis.width = Math.max(this.first.x, x) - this.x;\n\t\tthis.height =  Math.max(this.first.y, y) - this.y;\n\n\t\tvar dx = (mxClient.IS_VML) ? this.graph.panDx : 0;\n\t\tvar dy = (mxClient.IS_VML) ? this.graph.panDy : 0;\n\t\t\n\t\tthis.div.style.left = (this.x + dx) + 'px';\n\t\tthis.div.style.top = (this.y + dy) + 'px';\n\t\tthis.div.style.width = Math.max(1, this.width) + 'px';\n\t\tthis.div.style.height = Math.max(1, this.height) + 'px';\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes. This does\n * normally not need to be called, it is called automatically when the\n * window unloads.\n */\nmxRubberband.prototype.destroy = function()\n{\n\tif (!this.destroyed)\n\t{\n\t\tthis.destroyed = true;\n\t\tthis.graph.removeMouseListener(this);\n\t\tthis.graph.removeListener(this.forceRubberbandHandler);\n\t\tthis.graph.removeListener(this.panHandler);\n\t\tthis.reset();\n\t\t\n\t\tif (this.sharedDiv != null)\n\t\t{\n\t\t\tthis.sharedDiv = null;\n\t\t}\n\t}\n};\n\n__mxOutput.mxRubberband = typeof mxRubberband !== 'undefined' ? mxRubberband : undefined;\n"]}