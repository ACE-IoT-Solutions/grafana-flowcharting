{"version":3,"sources":["../../../../../../src/mxgraph/javascript/dist/js/handler/mxTooltipHandler.js"],"names":["mxTooltipHandler","graph","delay","addMouseListener","prototype","zIndex","ignoreTouchEvents","hideOnHover","destroyed","enabled","isEnabled","setEnabled","isHideOnHover","setHideOnHover","value","init","document","body","div","createElement","className","style","visibility","appendChild","mxEvent","addGestureListeners","mxUtils","bind","evt","hideTooltip","getStateForEvent","me","getState","mouseDown","sender","reset","mouseMove","getX","lastX","getY","lastY","state","getSource","node","stateSource","isSource","shape","text","mouseUp","resetTimer","thread","window","clearTimeout","restart","isMouseEvent","getEvent","x","y","setTimeout","isEditing","popupMenuHandler","isMenuShowing","isMouseDown","tip","getTooltip","show","hide","innerHTML","length","origin","getScrollOrigin","left","top","mxConstants","TOOLTIP_VERTICAL_OFFSET","isNode","replace","fit","destroy","removeMouseListener","release","parentNode","removeChild","__mxOutput","undefined"],"mappings":"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","file":"mxTooltipHandler.js","sourcesContent":["/**\n * Copyright (c) 2006-2015, JGraph Ltd\n * Copyright (c) 2006-2015, Gaudenz Alder\n */\n/**\n * Class: mxTooltipHandler\n * \n * Graph event handler that displays tooltips. <mxGraph.getTooltip> is used to\n * get the tooltip for a cell or handle. This handler is built-into\n * <mxGraph.tooltipHandler> and enabled using <mxGraph.setTooltips>.\n *\n * Example:\n * \n * (code>\n * new mxTooltipHandler(graph);\n * (end)\n * \n * Constructor: mxTooltipHandler\n * \n * Constructs an event handler that displays tooltips with the specified\n * delay (in milliseconds). If no delay is specified then a default delay\n * of 500 ms (0.5 sec) is used.\n * \n * Parameters:\n * \n * graph - Reference to the enclosing <mxGraph>.\n * delay - Optional delay in milliseconds.\n */\nfunction mxTooltipHandler(graph, delay)\n{\n\tif (graph != null)\n\t{\n\t\tthis.graph = graph;\n\t\tthis.delay = delay || 500;\n\t\tthis.graph.addMouseListener(this);\n\t}\n};\n\n/**\n * Variable: zIndex\n * \n * Specifies the zIndex for the tooltip and its shadow. Default is 10005.\n */\nmxTooltipHandler.prototype.zIndex = 10005;\n\n/**\n * Variable: graph\n * \n * Reference to the enclosing <mxGraph>.\n */\nmxTooltipHandler.prototype.graph = null;\n\n/**\n * Variable: delay\n * \n * Delay to show the tooltip in milliseconds. Default is 500.\n */\nmxTooltipHandler.prototype.delay = null;\n\n/**\n * Variable: ignoreTouchEvents\n * \n * Specifies if touch and pen events should be ignored. Default is true.\n */\nmxTooltipHandler.prototype.ignoreTouchEvents = true;\n\n/**\n * Variable: hideOnHover\n * \n * Specifies if the tooltip should be hidden if the mouse is moved over the\n * current cell. Default is false.\n */\nmxTooltipHandler.prototype.hideOnHover = false;\n\n/**\n * Variable: destroyed\n * \n * True if this handler was destroyed using <destroy>.\n */\nmxTooltipHandler.prototype.destroyed = false;\n\n/**\n * Variable: enabled\n * \n * Specifies if events are handled. Default is true.\n */\nmxTooltipHandler.prototype.enabled = true;\n\n/**\n * Function: isEnabled\n * \n * Returns true if events are handled. This implementation\n * returns <enabled>.\n */\nmxTooltipHandler.prototype.isEnabled = function()\n{\n\treturn this.enabled;\n};\n\n/**\n * Function: setEnabled\n * \n * Enables or disables event handling. This implementation\n * updates <enabled>.\n */\nmxTooltipHandler.prototype.setEnabled = function(enabled)\n{\n\tthis.enabled = enabled;\n};\n\n/**\n * Function: isHideOnHover\n * \n * Returns <hideOnHover>.\n */\nmxTooltipHandler.prototype.isHideOnHover = function()\n{\n\treturn this.hideOnHover;\n};\n\n/**\n * Function: setHideOnHover\n * \n * Sets <hideOnHover>.\n */\nmxTooltipHandler.prototype.setHideOnHover = function(value)\n{\n\tthis.hideOnHover = value;\n};\n\n/**\n * Function: init\n * \n * Initializes the DOM nodes required for this tooltip handler.\n */\nmxTooltipHandler.prototype.init = function()\n{\n\tif (document.body != null)\n\t{\n\t\tthis.div = document.createElement('div');\n\t\tthis.div.className = 'mxTooltip';\n\t\tthis.div.style.visibility = 'hidden';\n\n\t\tdocument.body.appendChild(this.div);\n\n\t\tmxEvent.addGestureListeners(this.div, mxUtils.bind(this, function(evt)\n\t\t{\n\t\t\tthis.hideTooltip();\n\t\t}));\n\t}\n};\n\n/**\n * Function: getStateForEvent\n * \n * Returns the <mxCellState> to be used for showing a tooltip for this event.\n */\nmxTooltipHandler.prototype.getStateForEvent = function(me)\n{\n\treturn me.getState();\n};\n\n/**\n * Function: mouseDown\n * \n * Handles the event by initiating a rubberband selection. By consuming the\n * event all subsequent events of the gesture are redirected to this\n * handler.\n */\nmxTooltipHandler.prototype.mouseDown = function(sender, me)\n{\n\tthis.reset(me, false);\n\tthis.hideTooltip();\n};\n\n/**\n * Function: mouseMove\n * \n * Handles the event by updating the rubberband selection.\n */\nmxTooltipHandler.prototype.mouseMove = function(sender, me)\n{\n\tif (me.getX() != this.lastX || me.getY() != this.lastY)\n\t{\n\t\tthis.reset(me, true);\n\t\tvar state = this.getStateForEvent(me);\n\t\t\n\t\tif (this.isHideOnHover() || state != this.state || (me.getSource() != this.node &&\n\t\t\t(!this.stateSource || (state != null && this.stateSource ==\n\t\t\t(me.isSource(state.shape) || !me.isSource(state.text))))))\n\t\t{\n\t\t\tthis.hideTooltip();\n\t\t}\n\t}\n\t\n\tthis.lastX = me.getX();\n\tthis.lastY = me.getY();\n};\n\n/**\n * Function: mouseUp\n * \n * Handles the event by resetting the tooltip timer or hiding the existing\n * tooltip.\n */\nmxTooltipHandler.prototype.mouseUp = function(sender, me)\n{\n\tthis.reset(me, true);\n\tthis.hideTooltip();\n};\n\n\n/**\n * Function: resetTimer\n * \n * Resets the timer.\n */\nmxTooltipHandler.prototype.resetTimer = function()\n{\n\tif (this.thread != null)\n\t{\n\t\twindow.clearTimeout(this.thread);\n\t\tthis.thread = null;\n\t}\n};\n\n/**\n * Function: reset\n * \n * Resets and/or restarts the timer to trigger the display of the tooltip.\n */\nmxTooltipHandler.prototype.reset = function(me, restart, state)\n{\n\tif (!this.ignoreTouchEvents || mxEvent.isMouseEvent(me.getEvent()))\n\t{\n\t\tthis.resetTimer();\n\t\tstate = (state != null) ? state : this.getStateForEvent(me);\n\t\t\n\t\tif (restart && this.isEnabled() && state != null && (this.div == null ||\n\t\t\tthis.div.style.visibility == 'hidden'))\n\t\t{\n\t\t\tvar node = me.getSource();\n\t\t\tvar x = me.getX();\n\t\t\tvar y = me.getY();\n\t\t\tvar stateSource = me.isSource(state.shape) || me.isSource(state.text);\n\t\n\t\t\tthis.thread = window.setTimeout(mxUtils.bind(this, function()\n\t\t\t{\n\t\t\t\tif (!this.graph.isEditing() && !this.graph.popupMenuHandler.isMenuShowing() && !this.graph.isMouseDown)\n\t\t\t\t{\n\t\t\t\t\t// Uses information from inside event cause using the event at\n\t\t\t\t\t// this (delayed) point in time is not possible in IE as it no\n\t\t\t\t\t// longer contains the required information (member not found)\n\t\t\t\t\tvar tip = this.graph.getTooltip(state, node, x, y);\n\t\t\t\t\tthis.show(tip, x, y);\n\t\t\t\t\tthis.state = state;\n\t\t\t\t\tthis.node = node;\n\t\t\t\t\tthis.stateSource = stateSource;\n\t\t\t\t}\n\t\t\t}), this.delay);\n\t\t}\n\t}\n};\n\n/**\n * Function: hide\n * \n * Hides the tooltip and resets the timer.\n */\nmxTooltipHandler.prototype.hide = function()\n{\n\tthis.resetTimer();\n\tthis.hideTooltip();\n};\n\n/**\n * Function: hideTooltip\n * \n * Hides the tooltip.\n */\nmxTooltipHandler.prototype.hideTooltip = function()\n{\n\tif (this.div != null)\n\t{\n\t\tthis.div.style.visibility = 'hidden';\n\t\tthis.div.innerHTML = '';\n\t}\n};\n\n/**\n * Function: show\n * \n * Shows the tooltip for the specified cell and optional index at the\n * specified location (with a vertical offset of 10 pixels).\n */\nmxTooltipHandler.prototype.show = function(tip, x, y)\n{\n\tif (!this.destroyed && tip != null && tip.length > 0)\n\t{\n\t\t// Initializes the DOM nodes if required\n\t\tif (this.div == null)\n\t\t{\n\t\t\tthis.init();\n\t\t}\n\t\t\n\t\tvar origin = mxUtils.getScrollOrigin();\n\n\t\tthis.div.style.zIndex = this.zIndex;\n\t\tthis.div.style.left = (x + origin.x) + 'px';\n\t\tthis.div.style.top = (y + mxConstants.TOOLTIP_VERTICAL_OFFSET +\n\t\t\torigin.y) + 'px';\n\n\t\tif (!mxUtils.isNode(tip))\n\t\t{\t\n\t\t\tthis.div.innerHTML = tip.replace(/\\n/g, '<br>');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.div.innerHTML = '';\n\t\t\tthis.div.appendChild(tip);\n\t\t}\n\t\t\n\t\tthis.div.style.visibility = '';\n\t\tmxUtils.fit(this.div);\n\t}\n};\n\n/**\n * Function: destroy\n * \n * Destroys the handler and all its resources and DOM nodes.\n */\nmxTooltipHandler.prototype.destroy = function()\n{\n\tif (!this.destroyed)\n\t{\n\t\tthis.graph.removeMouseListener(this);\n\t\tmxEvent.release(this.div);\n\t\t\n\t\tif (this.div != null && this.div.parentNode != null)\n\t\t{\n\t\t\tthis.div.parentNode.removeChild(this.div);\n\t\t}\n\t\t\n\t\tthis.destroyed = true;\n\t\tthis.div = null;\n\t}\n};\n\n__mxOutput.mxTooltipHandler = typeof mxTooltipHandler !== 'undefined' ? mxTooltipHandler : undefined;\n"]}